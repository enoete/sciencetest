<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üéÆ Science Adventure - Body Systems üéÆ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
        }

        h1 {
            text-align: center;
            color: #764ba2;
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
            animation: bounce 1s ease infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .subtitle {
            text-align: center;
            color: #667eea;
            font-size: 1.3em;
            margin-bottom: 30px;
            font-weight: bold;
        }

        .main-menu {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .menu-card {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .menu-card:hover {
            transform: scale(1.05) translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.3);
        }

        .menu-card.learn {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
        }

        .menu-card.game {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
        }

        .menu-card.quiz {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        }

        .menu-card h2 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .menu-card p {
            font-size: 1.2em;
            color: #333;
            font-weight: bold;
        }

        .section {
            display: none;
        }

        .section.active {
            display: block;
            animation: slideIn 0.5s;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-50px); }
            to { opacity: 1; transform: translateX(0); }
        }

        .back-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1.1em;
            margin-bottom: 20px;
            font-weight: bold;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            transition: all 0.3s;
        }

        .back-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 15px rgba(0,0,0,0.3);
        }

        /* Interactive Learning Cards */
        .flip-card-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .flip-card {
            background-color: transparent;
            width: 100%;
            height: 300px;
            perspective: 1000px;
            cursor: pointer;
        }

        .flip-card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }

        .flip-card.flipped .flip-card-inner {
            transform: rotateY(180deg);
        }

        .flip-card-front, .flip-card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
            border-radius: 15px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 20px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.2);
        }

        .flip-card-front {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .flip-card-back {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            transform: rotateY(180deg);
        }

        .flip-card-front h3 {
            font-size: 1.8em;
            margin: 15px 0;
        }

        .flip-card-front .emoji {
            font-size: 3em;
        }

        .flip-card-back p {
            font-size: 1.1em;
            line-height: 1.6;
        }

        .flip-instruction {
            text-align: center;
            font-size: 1.3em;
            color: #667eea;
            margin: 20px 0;
            font-weight: bold;
            animation: pulse 2s ease infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        /* Memory Game */
        .memory-game {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin: 30px auto;
            max-width: 600px;
        }

        .memory-card {
            aspect-ratio: 1;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 10px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2em;
            color: white;
            font-weight: bold;
            transition: all 0.3s;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        .memory-card:hover {
            transform: scale(1.05);
        }

        .memory-card.flipped {
            background: white;
            color: #333;
        }

        .memory-card.matched {
            background: linear-gradient(135deg, #4caf50 0%, #81c784 100%);
            color: white;
            cursor: default;
        }

        .game-stats {
            text-align: center;
            margin: 20px 0;
            font-size: 1.3em;
            font-weight: bold;
            color: #667eea;
        }

        /* Body Parts Click Game */
        .topic-section {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            padding: 30px;
            margin: 20px 0;
            border-radius: 20px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .clickable-part {
            position: relative;
            background: rgba(102, 126, 234, 0.7);
            border: 3px solid #764ba2;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
            font-size: 1.2em;
        }

        .clickable-part:hover {
            background: rgba(246, 147, 251, 0.9);
            transform: scale(1.05);
        }

        .clickable-part.found {
            background: rgba(76, 175, 80, 0.8);
            cursor: default;
        }

        /* Quiz Styles */
        .quiz-container {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
        }

        .question-card {
            background: white;
            padding: 25px;
            margin-bottom: 20px;
            border-radius: 10px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
            border: 3px solid transparent;
            transition: all 0.3s;
        }

        .question-card:hover {
            border-color: #667eea;
            transform: translateX(5px);
        }

        .question-number {
            display: inline-block;
            background: #667eea;
            color: white;
            padding: 8px 20px;
            border-radius: 25px;
            margin-bottom: 15px;
            font-weight: bold;
            font-size: 1.1em;
        }

        .question-text {
            font-size: 1.3em;
            margin-bottom: 20px;
            color: #333;
            font-weight: bold;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .option {
            padding: 18px;
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            border: 3px solid transparent;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1.2em;
            font-weight: bold;
        }

        .option:hover {
            transform: translateX(10px) scale(1.02);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .option.selected {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-color: #f5576c;
            animation: wiggle 0.5s;
        }

        @keyframes wiggle {
            0%, 100% { transform: rotate(0deg); }
            25% { transform: rotate(-5deg); }
            75% { transform: rotate(5deg); }
        }

        .option.correct {
            background: linear-gradient(135deg, #4caf50 0%, #81c784 100%);
            color: white;
            border-color: #2e7d32;
            animation: celebrate 0.6s;
        }

        @keyframes celebrate {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .option.incorrect {
            background: linear-gradient(135deg, #f44336 0%, #e57373 100%);
            color: white;
            border-color: #c62828;
            animation: shake 0.5s;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        /* Tap to Match Styles */
        .tap-match-container {
            display: flex;
            gap: 30px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .tap-items {
            flex: 1;
            min-width: 250px;
        }

        .tap-zones {
            flex: 1;
            min-width: 250px;
        }

        .tap-item {
            background: linear-gradient(135deg, #84fab0 0%, #8fd3f4 100%);
            padding: 18px;
            margin: 12px 0;
            border-radius: 12px;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            font-weight: bold;
            text-align: center;
            font-size: 1.1em;
            transition: all 0.3s;
            border: 3px solid transparent;
        }

        .tap-item:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 15px rgba(0,0,0,0.3);
        }

        .tap-item.selected {
            border-color: #f5576c;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            transform: scale(1.08);
        }

        .tap-item.matched {
            background: linear-gradient(135deg, #4caf50 0%, #81c784 100%);
            color: white;
            cursor: default;
        }

        .tap-zone {
            background: #f0f0f0;
            border: 4px dashed #999;
            padding: 18px;
            margin: 12px 0;
            border-radius: 12px;
            min-height: 70px;
            transition: all 0.3s;
            cursor: pointer;
        }

        .tap-zone:hover {
            background: #e8e8e8;
            transform: scale(1.02);
        }

        .tap-zone-label {
            font-weight: bold;
            color: #666;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .tap-zone.selected {
            border-color: #f5576c;
            background: #fce4ec;
            transform: scale(1.05);
        }

        .tap-zone.matched {
            background: #c8e6c9;
            border-color: #4caf50;
            border-style: solid;
        }

        .tap-zone.incorrect {
            background: #ffcdd2;
            border-color: #f44336;
            animation: error-shake 0.5s;
        }

        .tap-match-hint {
            text-align: center;
            font-size: 1.2em;
            color: #667eea;
            font-weight: bold;
            margin: 15px 0;
            padding: 15px;
            background: #e3f2fd;
            border-radius: 10px;
        }

        .submit-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 18px 45px;
            font-size: 1.4em;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            margin-top: 30px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            transition: all 0.3s;
            font-weight: bold;
        }

        .submit-btn:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
        }

        .submit-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        .score-display {
            text-align: center;
            font-size: 2em;
            padding: 40px;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            border-radius: 15px;
            margin: 20px 0;
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
            animation: bounceIn 0.8s;
        }

        @keyframes bounceIn {
            0% { transform: scale(0); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .emoji {
            font-size: 1.5em;
            margin-right: 10px;
        }

        .progress-bar {
            width: 100%;
            height: 35px;
            background: #e0e0e0;
            border-radius: 20px;
            overflow: hidden;
            margin-bottom: 20px;
            box-shadow: inset 0 2px 5px rgba(0,0,0,0.1);
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 1.1em;
        }

        .true-false-btn {
            padding: 25px 50px;
            font-size: 1.4em;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            margin: 15px;
            transition: all 0.3s;
            font-weight: bold;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .true-btn {
            background: linear-gradient(135deg, #84fab0 0%, #8fd3f4 100%);
        }

        .false-btn {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
        }

        .true-false-btn:hover {
            transform: scale(1.1) rotate(3deg);
            box-shadow: 0 8px 20px rgba(0,0,0,0.3);
        }

        .true-false-btn.selected {
            box-shadow: 0 0 0 5px #764ba2;
            transform: scale(1.15);
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 2em;
            }

            .container {
                padding: 15px;
            }

            .memory-game {
                grid-template-columns: repeat(3, 1fr);
            }

            .true-false-btn {
                padding: 18px 35px;
                font-size: 1.2em;
            }
        }

        .celebration {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 5em;
            z-index: 1000;
            animation: explode 1s ease-out forwards;
            pointer-events: none;
        }

        @keyframes explode {
            0% {
                transform: translate(-50%, -50%) scale(0);
                opacity: 1;
            }
            100% {
                transform: translate(-50%, -50%) scale(3);
                opacity: 0;
            }
        }

        /* Story Mode Styles */
        .story-section {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            padding: 30px;
            margin: 20px 0;
            border-radius: 20px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            border: 4px solid #f5576c;
        }

        .story-title {
            text-align: center;
            color: #764ba2;
            font-size: 2.5em;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        .story-intro {
            background: white;
            padding: 25px;
            border-radius: 15px;
            font-size: 1.3em;
            line-height: 1.8;
            margin-bottom: 30px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }

        .story-panel {
            background: white;
            padding: 25px;
            margin: 20px 0;
            border-radius: 15px;
            border: 3px solid #667eea;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            position: relative;
            transition: all 0.3s;
        }

        .story-panel:hover {
            transform: scale(1.02);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
        }

        .story-panel h3 {
            color: #f5576c;
            font-size: 1.8em;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .story-panel p {
            font-size: 1.2em;
            line-height: 1.8;
            margin-bottom: 15px;
        }

        .story-character {
            display: inline-block;
            background: linear-gradient(135deg, #84fab0 0%, #8fd3f4 100%);
            padding: 5px 12px;
            border-radius: 20px;
            font-weight: bold;
            color: #333;
            margin: 0 3px;
        }

        .story-highlight {
            background: #fff59d;
            padding: 3px 8px;
            border-radius: 5px;
            font-weight: bold;
        }

        .story-callout {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            padding: 20px;
            border-radius: 12px;
            margin: 20px 0;
            border-left: 5px solid #667eea;
            font-size: 1.15em;
            font-weight: bold;
        }

        .character-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin: 15px 0;
            display: flex;
            align-items: center;
            gap: 20px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }

        .character-emoji {
            font-size: 3em;
            min-width: 60px;
            text-align: center;
        }

        .character-info h4 {
            font-size: 1.5em;
            margin-bottom: 8px;
        }

        .character-info p {
            font-size: 1.1em;
            line-height: 1.6;
        }

        .story-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üéÆ Science Adventure! üéÆ</h1>
        <div class="subtitle">Get Ready for Your Test on November 3rd!</div>

        <!-- Main Menu -->
        <div id="mainMenu" class="section active">
            <div class="main-menu">
                <div class="menu-card learn" onclick="showSection('storyMode')">
                    <h2>üìñ</h2>
                    <p>Story Adventure!</p>
                    <p style="font-size: 0.9em; margin-top: 10px;">Start here! Learn with fun stories!</p>
                </div>
                <div class="menu-card learn" onclick="showSection('flipCards')">
                    <h2>üìö</h2>
                    <p>Learn with Flip Cards!</p>
                    <p style="font-size: 0.9em; margin-top: 10px;">Click cards to reveal secrets!</p>
                </div>
                <div class="menu-card game" onclick="showSection('memoryGame')">
                    <h2>üéØ</h2>
                    <p>Memory Match Game!</p>
                    <p style="font-size: 0.9em; margin-top: 10px;">Match the pairs!</p>
                </div>
                <div class="menu-card game" onclick="showSection('clickGame')">
                    <h2>üé™</h2>
                    <p>Body Parts Challenge!</p>
                    <p style="font-size: 0.9em; margin-top: 10px;">Find all body parts!</p>
                </div>
                <div class="menu-card quiz" onclick="showSection('quiz')">
                    <h2>‚úèÔ∏è</h2>
                    <p>Take the Big Quiz!</p>
                    <p style="font-size: 0.9em; margin-top: 10px;">Show what you know!</p>
                </div>
            </div>
        </div>

        <!-- Flip Cards Section -->
        <div id="flipCards" class="section">
            <button class="back-btn" onclick="showSection('mainMenu')">‚¨ÖÔ∏è Back to Menu</button>
            <h2 style="text-align: center; color: #764ba2; font-size: 2em; margin-bottom: 20px;">
                Click Each Card to Learn! ‚ú®
            </h2>
            <p class="flip-instruction">üëÜ Tap or Click the Cards! üëÜ</p>

            <h3 style="text-align: center; color: #667eea; font-size: 1.8em; margin: 30px 0;">‚ù§Ô∏è Circulatory System</h3>
            <div class="flip-card-container">
                <div class="flip-card" onclick="this.classList.toggle('flipped')">
                    <div class="flip-card-inner">
                        <div class="flip-card-front">
                            <span class="emoji">‚ù§Ô∏è</span>
                            <h3>Heart</h3>
                            <p>Click me!</p>
                        </div>
                        <div class="flip-card-back">
                            <p>The heart pumps blood to your whole body! It's made of cardiac muscle and works automatically without you thinking about it! üí™</p>
                        </div>
                    </div>
                </div>

                <div class="flip-card" onclick="this.classList.toggle('flipped')">
                    <div class="flip-card-inner">
                        <div class="flip-card-front">
                            <span class="emoji">üî¥</span>
                            <h3>Arteries</h3>
                            <p>Click me!</p>
                        </div>
                        <div class="flip-card-back">
                            <p>Arteries carry oxygen-rich blood AWAY from your heart to all parts of your body! They have thick walls to handle the pressure! üí™</p>
                        </div>
                    </div>
                </div>

                <div class="flip-card" onclick="this.classList.toggle('flipped')">
                    <div class="flip-card-inner">
                        <div class="flip-card-front">
                            <span class="emoji">üîµ</span>
                            <h3>Veins</h3>
                            <p>Click me!</p>
                        </div>
                        <div class="flip-card-back">
                            <p>Veins bring blood BACK to your heart so it can get more oxygen! They have thinner walls than arteries! üîÑ</p>
                        </div>
                    </div>
                </div>

                <div class="flip-card" onclick="this.classList.toggle('flipped')">
                    <div class="flip-card-inner">
                        <div class="flip-card-front">
                            <span class="emoji">üåü</span>
                            <h3>Capillaries</h3>
                            <p>Click me!</p>
                        </div>
                        <div class="flip-card-back">
                            <p>Tiny blood vessels that connect arteries to veins! This is where oxygen moves from blood to your cells! ‚ú®</p>
                        </div>
                    </div>
                </div>

                <div class="flip-card" onclick="this.classList.toggle('flipped')">
                    <div class="flip-card-inner">
                        <div class="flip-card-front">
                            <span class="emoji">ü©∏</span>
                            <h3>Blood</h3>
                            <p>Click me!</p>
                        </div>
                        <div class="flip-card-back">
                            <p>Blood carries oxygen and nutrients to all your cells! Without oxygen, your cells would die! Blood is bright red when full of oxygen! üåà</p>
                        </div>
                    </div>
                </div>

                <div class="flip-card" onclick="this.classList.toggle('flipped')">
                    <div class="flip-card-inner">
                        <div class="flip-card-front">
                            <span class="emoji">üèÉ</span>
                            <h3>Heart Rate</h3>
                            <p>Click me!</p>
                        </div>
                        <div class="flip-card-back">
                            <p>At rest: 70-80 beats per minute. After exercise: 100-140 beats! Your heart speeds up to give muscles more oxygen! üíì</p>
                        </div>
                    </div>
                </div>

                <div class="flip-card" onclick="this.classList.toggle('flipped')">
                    <div class="flip-card-inner">
                        <div class="flip-card-front">
                            <span class="emoji">‚ö°</span>
                            <h3>Pacemaker Cells</h3>
                            <p>Click me!</p>
                        </div>
                        <div class="flip-card-back">
                            <p>Special cells in cardiac muscle that make your heart beat automatically! They're like tiny electrical batteries that keep your heart pumping! ‚ö°</p>
                        </div>
                    </div>
                </div>

                <div class="flip-card" onclick="this.classList.toggle('flipped')">
                    <div class="flip-card-inner">
                        <div class="flip-card-front">
                            <span class="emoji">üî¥</span>
                            <h3>High Blood Pressure</h3>
                            <p>Click me!</p>
                        </div>
                        <div class="flip-card-back">
                            <p>When blood pushes too hard against blood vessel walls! Can cause vessels to weaken or burst. Also called Hypertension. ü©∫</p>
                        </div>
                    </div>
                </div>

                <div class="flip-card" onclick="this.classList.toggle('flipped')">
                    <div class="flip-card-inner">
                        <div class="flip-card-front">
                            <span class="emoji">üß†</span>
                            <h3>Stroke</h3>
                            <p>Click me!</p>
                        </div>
                        <div class="flip-card-back">
                            <p>Happens when a blood vessel to the brain bursts or gets blocked! The brain can't get oxygen and blood, causing brain cells to die. ‚ö†Ô∏è</p>
                        </div>
                    </div>
                </div>

                <div class="flip-card" onclick="this.classList.toggle('flipped')">
                    <div class="flip-card-inner">
                        <div class="flip-card-front">
                            <span class="emoji">üîÑ</span>
                            <h3>Blood Circulation</h3>
                            <p>Click me!</p>
                        </div>
                        <div class="flip-card-back">
                            <p>Heart ‚Üí Arteries ‚Üí Capillaries (oxygen moves to cells!) ‚Üí Veins ‚Üí Back to Heart! This cycle repeats constantly to keep you alive! üîÑ</p>
                        </div>
                    </div>
                </div>
            </div>

            <h3 style="text-align: center; color: #667eea; font-size: 1.8em; margin: 30px 0;">ü¶¥ Musculoskeletal System</h3>
            <div class="flip-card-container">
                <div class="flip-card" onclick="this.classList.toggle('flipped')">
                    <div class="flip-card-inner">
                        <div class="flip-card-front">
                            <span class="emoji">ü¶¥</span>
                            <h3>Bones</h3>
                            <p>Click me!</p>
                        </div>
                        <div class="flip-card-back">
                            <p>You have 206 bones! They're made of calcium. The femur is the biggest bone. The smallest bones are in your ear! ü¶ª</p>
                        </div>
                    </div>
                </div>

                <div class="flip-card" onclick="this.classList.toggle('flipped')">
                    <div class="flip-card-inner">
                        <div class="flip-card-front">
                            <span class="emoji">üí™</span>
                            <h3>Skeletal Muscle</h3>
                            <p>Click me!</p>
                        </div>
                        <div class="flip-card-back">
                            <p>Muscles YOU control! They attach to bones with tendons. When they contract, they pull bones to move! You have over 700 muscles! üíØ</p>
                        </div>
                    </div>
                </div>

                <div class="flip-card" onclick="this.classList.toggle('flipped')">
                    <div class="flip-card-inner">
                        <div class="flip-card-front">
                            <span class="emoji">üåä</span>
                            <h3>Smooth Muscle</h3>
                            <p>Click me!</p>
                        </div>
                        <div class="flip-card-back">
                            <p>Muscles that work WITHOUT your control! Found in your liver, kidneys, and lungs. They keep you alive automatically! ü§ñ</p>
                        </div>
                    </div>
                </div>

                <div class="flip-card" onclick="this.classList.toggle('flipped')">
                    <div class="flip-card-inner">
                        <div class="flip-card-front">
                            <span class="emoji">üîó</span>
                            <h3>Tendons</h3>
                            <p>Click me!</p>
                        </div>
                        <div class="flip-card-back">
                            <p>Tendons connect MUSCLES to BONES! They help you move by pulling bones when muscles contract! üé£</p>
                        </div>
                    </div>
                </div>

                <div class="flip-card" onclick="this.classList.toggle('flipped')">
                    <div class="flip-card-inner">
                        <div class="flip-card-front">
                            <span class="emoji">üîó</span>
                            <h3>Ligaments</h3>
                            <p>Click me!</p>
                        </div>
                        <div class="flip-card-back">
                            <p>Ligaments connect BONES to other BONES! They help hold your skeleton together! üß©</p>
                        </div>
                    </div>
                </div>

                <div class="flip-card" onclick="this.classList.toggle('flipped')">
                    <div class="flip-card-inner">
                        <div class="flip-card-front">
                            <span class="emoji">üéØ</span>
                            <h3>Joints & Cartilage</h3>
                            <p>Click me!</p>
                        </div>
                        <div class="flip-card-back">
                            <p>Joints are where bones meet! Cartilage cushions them so they don't get damaged when you move! üõ°Ô∏è</p>
                        </div>
                    </div>
                </div>

                <div class="flip-card" onclick="this.classList.toggle('flipped')">
                    <div class="flip-card-inner">
                        <div class="flip-card-front">
                            <span class="emoji">ü¶¥</span>
                            <h3>Bone Growth</h3>
                            <p>Click me!</p>
                        </div>
                        <div class="flip-card-back">
                            <p>Bones start growing around week 6-7 before you're born! They grow mostly during childhood and stop growing around late teens to early twenties (age 20)! üìè</p>
                        </div>
                    </div>
                </div>

                <div class="flip-card" onclick="this.classList.toggle('flipped')">
                    <div class="flip-card-inner">
                        <div class="flip-card-front">
                            <span class="emoji">üò£</span>
                            <h3>Arthritis</h3>
                            <p>Click me!</p>
                        </div>
                        <div class="flip-card-back">
                            <p>A disease that causes swelling and pain in joints! Can happen from lack of cartilage or wear and tear on the body. Causes joint pain and stiffness! ü©π</p>
                        </div>
                    </div>
                </div>

                <div class="flip-card" onclick="this.classList.toggle('flipped')">
                    <div class="flip-card-inner">
                        <div class="flip-card-front">
                            <span class="emoji">üíî</span>
                            <h3>Osteoporosis</h3>
                            <p>Click me!</p>
                        </div>
                        <div class="flip-card-back">
                            <p>A disease where bones become weak and break easily! Happens when the body loses too much bone or makes too little bone. Bones can break more easily than normal! üè•</p>
                        </div>
                    </div>
                </div>

                <div class="flip-card" onclick="this.classList.toggle('flipped')">
                    <div class="flip-card-inner">
                        <div class="flip-card-front">
                            <span class="emoji">ü§ù</span>
                            <h3>Systems Working Together</h3>
                            <p>Click me!</p>
                        </div>
                        <div class="flip-card-back">
                            <p>Bones give structure and support! Muscles attach to bones with tendons! When muscles contract, they pull bones to create movement! They work as a team! üí™ü¶¥</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Memory Game Section -->
        <div id="memoryGame" class="section">
            <button class="back-btn" onclick="showSection('mainMenu')">‚¨ÖÔ∏è Back to Menu</button>
            <h2 style="text-align: center; color: #764ba2; font-size: 2em; margin-bottom: 20px;">
                üéØ Memory Match Challenge! üéØ
            </h2>
            <p style="text-align: center; font-size: 1.2em; margin-bottom: 20px;">
                Find matching pairs of body system terms!
            </p>
            <div class="game-stats">
                <div>Moves: <span id="moveCount">0</span> | Matches: <span id="matchCount">0</span>/8</div>
            </div>
            <div class="memory-game" id="memoryGameBoard"></div>
            <div style="text-align: center; margin-top: 20px;">
                <button class="submit-btn" onclick="resetMemoryGame()">üîÑ Play Again</button>
            </div>
        </div>

        <!-- Click Game Section -->
        <div id="clickGame" class="section">
            <button class="back-btn" onclick="showSection('mainMenu')">‚¨ÖÔ∏è Back to Menu</button>
            <h2 style="text-align: center; color: #764ba2; font-size: 2em; margin-bottom: 20px;">
                üé™ Find the Body Parts Challenge! üé™
            </h2>
            <p style="text-align: center; font-size: 1.2em; margin-bottom: 20px;">
                Click on all the highlighted parts to learn about them!
            </p>
            <div class="game-stats">
                <div>Found: <span id="partsFound">0</span>/10</div>
            </div>
            
            <div class="topic-section">
                <h3 style="color: #764ba2; text-align: center;">‚ù§Ô∏è Circulatory System Parts</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-top: 20px;">
                    <div class="clickable-part" style="width: 100%; height: 80px; border-radius: 12px;" onclick="foundPart(this, 'Heart', 'Pumps blood throughout your body!')">
                        ‚ù§Ô∏è Heart
                    </div>
                    <div class="clickable-part" style="width: 100%; height: 80px; border-radius: 12px;" onclick="foundPart(this, 'Arteries', 'Carry blood away from the heart!')">
                        üî¥ Arteries
                    </div>
                    <div class="clickable-part" style="width: 100%; height: 80px; border-radius: 12px;" onclick="foundPart(this, 'Veins', 'Bring blood back to the heart!')">
                        üîµ Veins
                    </div>
                    <div class="clickable-part" style="width: 100%; height: 80px; border-radius: 12px;" onclick="foundPart(this, 'Capillaries', 'Tiny vessels connecting arteries and veins!')">
                        üåü Capillaries
                    </div>
                    <div class="clickable-part" style="width: 100%; height: 80px; border-radius: 12px;" onclick="foundPart(this, 'Blood', 'Carries oxygen and nutrients!')">
                        ü©∏ Blood
                    </div>
                </div>
            </div>

            <div class="topic-section" style="margin-top: 30px;">
                <h3 style="color: #764ba2; text-align: center;">ü¶¥ Musculoskeletal System Parts</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-top: 20px;">
                    <div class="clickable-part" style="width: 100%; height: 80px; border-radius: 12px;" onclick="foundPart(this, 'Bones', 'You have 206 bones made of calcium!')">
                        ü¶¥ Bones
                    </div>
                    <div class="clickable-part" style="width: 100%; height: 80px; border-radius: 12px;" onclick="foundPart(this, 'Skeletal Muscle', 'Muscles you can control!')">
                        üí™ Skeletal Muscle
                    </div>
                    <div class="clickable-part" style="width: 100%; height: 80px; border-radius: 12px;" onclick="foundPart(this, 'Smooth Muscle', 'Works automatically without control!')">
                        üåä Smooth Muscle
                    </div>
                    <div class="clickable-part" style="width: 100%; height: 80px; border-radius: 12px;" onclick="foundPart(this, 'Tendons', 'Connect muscles to bones!')">
                        üîó Tendons
                    </div>
                    <div class="clickable-part" style="width: 100%; height: 80px; border-radius: 12px;" onclick="foundPart(this, 'Ligaments', 'Connect bones to bones!')">
                        üîó Ligaments
                    </div>
                </div>
            </div>

            <div id="clickGameFeedback" style="text-align: center; margin-top: 30px; font-size: 1.5em; font-weight: bold; color: #667eea;"></div>
        </div>

        <!-- Story Mode Section -->
        <div id="storyMode" class="section">
            <button class="back-btn" onclick="showSection('mainMenu')">‚¨ÖÔ∏è Back to Menu</button>
            
            <div class="story-section">
                <h2 class="story-title">üèôÔ∏è Welcome to Body City! üèôÔ∏è</h2>
                
                <div class="story-intro">
                    <p><strong>Imagine your body is a HUGE city!</strong> üåÜ Body City never sleeps and is always busy with millions of workers doing their jobs 24/7 to keep everything running smoothly. Let's meet the characters who keep Body City alive!</p>
                </div>

                <h3 style="text-align: center; color: #667eea; font-size: 2em; margin: 30px 0;">Meet the Characters! üé≠</h3>

                <div class="story-grid">
                    <div class="character-card">
                        <div class="character-emoji">‚ù§Ô∏è</div>
                        <div class="character-info">
                            <h4>Captain Heart</h4>
                            <p>The powerful water pump station at the center of Body City! Works 24/7 without taking breaks!</p>
                        </div>
                    </div>

                    <div class="character-card">
                        <div class="character-emoji">üöõ</div>
                        <div class="character-info">
                            <h4>Artie the Artery Truck</h4>
                            <p>Strong delivery trucks with THICK walls that carry oxygen-filled packages AWAY from Captain Heart!</p>
                        </div>
                    </div>

                    <div class="character-card">
                        <div class="character-emoji">üöê</div>
                        <div class="character-info">
                            <h4>Vinny the Vein Van</h4>
                            <p>Return delivery vans with thinner walls that bring empty packages BACK to Captain Heart for refills!</p>
                        </div>
                    </div>

                    <div class="character-card">
                        <div class="character-emoji">üõµ</div>
                        <div class="character-info">
                            <h4>Cappy the Capillary Scooter</h4>
                            <p>Tiny scooters that zip through narrow alleyways connecting the big trucks and vans! Delivers oxygen right to people's doors!</p>
                        </div>
                    </div>

                    <div class="character-card">
                        <div class="character-emoji">üì¶</div>
                        <div class="character-info">
                            <h4>Bobby Blood (the Package)</h4>
                            <p>The precious red packages full of oxygen and food that everyone in Body City needs to survive!</p>
                        </div>
                    </div>
                </div>

                <div class="story-panel">
                    <h3>üåÖ A Day in Body City</h3>
                    <p>Every morning (and night, and afternoon - because Body City NEVER stops!), <span class="story-character">Captain Heart ‚ù§Ô∏è</span> pumps water through the city. But this isn't regular water - it's special <span class="story-character">Bobby Blood üì¶</span> packages filled with oxygen and nutrients!</p>
                    
                    <p><span class="story-character">Captain Heart ‚ù§Ô∏è</span> has special workers inside called <span class="story-highlight">pacemaker cells</span> - think of them like tiny alarm clocks that tell Captain Heart exactly when to pump! These alarm clocks NEVER need batteries and work automatically!</p>
                    
                    <div class="story-callout">
                        üí° <strong>Remember:</strong> Captain Heart is made of CARDIAC MUSCLE - a special type of muscle that works all by itself without you telling it to!
                    </div>
                </div>

                <div class="story-panel">
                    <h3>üöõ The Delivery Route!</h3>
                    <p><strong>STEP 1:</strong> <span class="story-character">Captain Heart ‚ù§Ô∏è</span> pumps the <span class="story-character">Bobby Blood üì¶</span> packages into <span class="story-character">Artie the Artery Truck üöõ</span></p>
                    
                    <p><strong>STEP 2:</strong> <span class="story-character">Artie üöõ</span> drives on the BIG highways (arteries) carrying red packages AWAY from Captain Heart to different neighborhoods of Body City. Artie has SUPER THICK walls because Captain Heart pumps with a LOT of force!</p>
                    
                    <p><strong>STEP 3:</strong> When Artie reaches the neighborhoods, he hands packages to <span class="story-character">Cappy the Capillary Scooter üõµ</span>. Cappy is SO small she can zip through tiny alleyways that Artie can't fit through!</p>
                    
                    <p><strong>STEP 4:</strong> <span class="story-character">Cappy üõµ</span> delivers oxygen from the packages to all the houses (cells) in Body City. Everyone needs oxygen to stay alive!</p>
                    
                    <p><strong>STEP 5:</strong> After delivering oxygen, the now-empty packages are picked up by <span class="story-character">Vinny the Vein Van üöê</span>. Vinny's walls are thinner than Artie's because there's less pressure on the return trip.</p>
                    
                    <p><strong>STEP 6:</strong> <span class="story-character">Vinny üöê</span> brings the empty packages BACK to <span class="story-character">Captain Heart ‚ù§Ô∏è</span> so they can be refilled with fresh oxygen!</p>
                    
                    <div class="story-callout">
                        üîÑ <strong>This cycle repeats over and over and over - about 100,000 times a DAY!</strong> That's a lot of deliveries!
                    </div>
                </div>

                <div class="story-panel">
                    <h3>üèÉ Exercise Time in Body City!</h3>
                    <p>When you start running or playing, Body City gets SUPER busy! All the neighborhoods (muscles) start shouting "WE NEED MORE OXYGEN! HURRY!"</p>
                    
                    <p><span class="story-character">Captain Heart ‚ù§Ô∏è</span> hears this and speeds up! Instead of pumping 70-80 times per minute, Captain Heart starts pumping 100-140 times per minute! That's like going from a normal walk to a fast run!</p>
                    
                    <p><span class="story-character">Artie üöõ</span> and <span class="story-character">Vinny üöê</span> have to drive MUCH faster to keep up with all the deliveries. <span class="story-character">Cappy üõµ</span> is zipping around like crazy delivering oxygen to all the hungry muscle cells!</p>
                    
                    <div class="story-callout">
                        üí™ <strong>Fun Fact:</strong> This is why you can feel your heart beating faster when you exercise - Captain Heart is working overtime!
                    </div>
                </div>

                <div class="story-panel">
                    <h3>‚ö†Ô∏è When Things Go Wrong in Body City</h3>
                    
                    <p><strong>üî¥ High Blood Pressure (Traffic Jam!):</strong> Imagine if <span class="story-character">Artie üöõ</span> pushes too hard against the highway walls! The roads start to crack and weaken. This is called <span class="story-highlight">Hypertension</span> - when blood pushes too hard against blood vessel walls!</p>
                    
                    <p><strong>üß† Stroke (Broken Bridge!):</strong> Sometimes a highway going to Brain Central (your brain) bursts or gets blocked - like a bridge collapsing! Now Brain Central can't get oxygen packages and brain cells start to die. This is a STROKE and it's very serious!</p>
                    
                    <div class="story-callout">
                        ü©∫ <strong>Staying Healthy:</strong> Eating healthy food and exercising helps keep the highways strong and Captain Heart pumping well!
                    </div>
                </div>
            </div>

            <div class="story-section" style="margin-top: 40px;">
                <h2 class="story-title">üèóÔ∏è Skeleton Construction Company! üèóÔ∏è</h2>
                
                <div class="story-intro">
                    <p><strong>Now imagine your body is a GIANT CONSTRUCTION SITE!</strong> üèóÔ∏è The Skeleton Construction Company is building the strongest building in the world - it's called... YOU! Let's meet the construction crew!</p>
                </div>

                <h3 style="text-align: center; color: #667eea; font-size: 2em; margin: 30px 0;">Meet the Construction Crew! üë∑</h3>

                <div class="story-grid">
                    <div class="character-card">
                        <div class="character-emoji">ü¶¥</div>
                        <div class="character-info">
                            <h4>Bonnie the Bone Beam</h4>
                            <p>The 206 steel beams that make up the frame of the building! Made of super strong calcium!</p>
                        </div>
                    </div>

                    <div class="character-card">
                        <div class="character-emoji">üí™</div>
                        <div class="character-info">
                            <h4>Skelly the Skeletal Muscle</h4>
                            <p>Over 700 construction workers YOU control! They pull on the beams to make them move!</p>
                        </div>
                    </div>

                    <div class="character-card">
                        <div class="character-emoji">üåä</div>
                        <div class="character-info">
                            <h4>Smooth Sam</h4>
                            <p>Secret underground workers who work 24/7 WITHOUT being told! They keep the plumbing and electrical working!</p>
                        </div>
                    </div>

                    <div class="character-card">
                        <div class="character-emoji">üîó</div>
                        <div class="character-info">
                            <h4>Terry the Tendon Rope</h4>
                            <p>Super strong ropes that connect workers to beams! When workers pull, bones move!</p>
                        </div>
                    </div>

                    <div class="character-card">
                        <div class="character-emoji">üîó</div>
                        <div class="character-info">
                            <h4>Larry the Ligament Cable</h4>
                            <p>Steel cables that hold beams together! Keep the frame from falling apart!</p>
                        </div>
                    </div>

                    <div class="character-card">
                        <div class="character-emoji">üéØ</div>
                        <div class="character-info">
                            <h4>Carly the Cartilage Cushion</h4>
                            <p>Soft padding at joints where beams meet! Prevents beams from scraping against each other!</p>
                        </div>
                    </div>
                </div>

                <div class="story-panel">
                    <h3>üèóÔ∏è Building the Framework</h3>
                    <p>When you were just a tiny baby (even before you were born - around week 6-7!), the construction crew started building! They started with just a few <span class="story-character">Bonnie the Bone Beams ü¶¥</span> and kept adding more and more!</p>
                    
                    <p>The construction crew worked REALLY hard during your childhood! They made the beams longer and stronger. By the time you're in your late teens or early twenties (around age 20), the crew finally says "The building is complete!" and the bones stop growing taller.</p>
                    
                    <div class="story-callout">
                        üìè <strong>Remember:</strong> You have 206 bone beams total! The FEMUR (thigh bone) is the biggest beam, and the tiniest beams are hidden inside your ears!
                    </div>
                </div>

                <div class="story-panel">
                    <h3>üí™ How the Workers Make You Move!</h3>
                    <p><strong>Here's the AMAZING part:</strong> You are the BOSS of <span class="story-character">Skelly the Skeletal Muscle üí™</span> workers! When you want to pick up a pencil, you tell Skelly "Hey! Time to work!"</p>
                    
                    <p><span class="story-character">Skelly üí™</span> grabs onto <span class="story-character">Terry the Tendon Rope üîó</span> and PULLS really hard! Since Terry is attached to <span class="story-character">Bonnie the Bone Beam ü¶¥</span>, when Skelly pulls Terry, the bone beam moves! That's how you move your arms and legs!</p>
                    
                    <p>Think of it like a puppet! <span class="story-character">Skelly üí™</span> is the puppeteer, <span class="story-character">Terry üîó</span> is the string, and <span class="story-character">Bonnie ü¶¥</span> is the puppet!</p>
                    
                    <div class="story-callout">
                        ü§ù <strong>Teamwork!</strong> Muscles can only PULL, not push! That's why they work in pairs - one pulls to bend your arm, another pulls to straighten it!
                    </div>
                </div>

                <div class="story-panel">
                    <h3>üåä The Secret Underground Crew</h3>
                    <p>While <span class="story-character">Skelly üí™</span> is doing all the obvious work, <span class="story-character">Smooth Sam üåä</span> is working underground where you can't see! Smooth Sam and his crew work in:</p>
                    
                    <ul style="font-size: 1.2em; margin-left: 30px; line-height: 2;">
                        <li>ü´Å <strong>The Air Conditioning System</strong> (your lungs)</li>
                        <li>üçï <strong>The Food Processing Plant</strong> (your stomach and intestines)</li>
                        <li>üè• <strong>The Filtration Department</strong> (your kidneys and liver)</li>
                    </ul>
                    
                    <p>You can't control Smooth Sam - he works automatically! Good thing too, because imagine having to remember to digest your lunch! üòÖ</p>
                </div>

                <div class="story-panel">
                    <h3>üéØ The Joint Connection Points</h3>
                    <p>Where two <span class="story-character">Bonnie Bone Beams ü¶¥</span> meet, there's a special connection point called a JOINT. But if beams scraped against each other all day, they'd get damaged!</p>
                    
                    <p>That's where <span class="story-character">Carly the Cartilage Cushion üéØ</span> comes in! Carly sits at every joint providing soft, squishy padding. When you bend your elbow or knee, Carly makes sure the bones glide smoothly without hurting each other!</p>
                    
                    <p><span class="story-character">Larry the Ligament Cable üîó</span> wraps around the joints like safety belts, holding the beams together so they don't fall apart when you move!</p>
                    
                    <div class="story-callout">
                        üé™ <strong>Fun Example:</strong> Your knee joint is like a door hinge! The bones are the door and frame, cartilage is the cushioning, and ligaments are the screws holding it together!
                    </div>
                </div>

                <div class="story-panel">
                    <h3>üèãÔ∏è Working Out at the Construction Site</h3>
                    <p>When people exercise and lift weights, they're actually giving <span class="story-character">Skelly üí™</span> a HARDER job to do! Just like studying makes your brain stronger, working hard makes Skelly's muscle fibers grow bigger and stronger!</p>
                    
                    <p>But here's the thing: <span class="story-character">Smooth Sam üåä</span> and <span class="story-character">Captain Heart ‚ù§Ô∏è</span> (the cardiac muscle) CAN'T get stronger from lifting weights! They're already working 24/7 at max power!</p>
                    
                    <p>When you see someone with big muscles, they've been training <span class="story-character">Skelly üí™</span> - the SKELETAL muscles - the only muscles you can control!</p>
                </div>

                <div class="story-panel">
                    <h3>‚ö†Ô∏è When the Construction Site Has Problems</h3>
                    
                    <p><strong>üò£ Arthritis (Worn Out Cushions!):</strong> Sometimes <span class="story-character">Carly the Cartilage Cushion üéØ</span> gets worn out or damaged! Now the bone beams scrape directly against each other at the joints. OUCH! This causes swelling, pain, and stiffness. It's like a door hinge that lost its oil!</p>
                    
                    <p><strong>üíî Osteoporosis (Weak Beams!):</strong> Sometimes <span class="story-character">Bonnie the Bone Beams ü¶¥</span> don't get enough calcium to stay strong! The beams become weak and brittle, like chalk instead of steel! Now they can break much more easily than normal bones!</p>
                    
                    <div class="story-callout">
                        ü•õ <strong>Stay Strong!</strong> Drinking milk and eating foods with calcium helps keep Bonnie strong! Exercise also tells the bones "Stay tough - we need you!"
                    </div>
                </div>

                <div class="story-panel">
                    <h3>ü§ù The BIG Picture: How It All Works Together!</h3>
                    <p><strong>Here's the COOLEST part:</strong> Body City and the Skeleton Construction Company work as ONE BIG TEAM!</p>
                    
                    <p>When <span class="story-character">Skelly üí™</span> pulls <span class="story-character">Terry üîó</span> to move <span class="story-character">Bonnie ü¶¥</span>, he needs ENERGY! Where does energy come from? The <span class="story-character">Bobby Blood üì¶</span> packages delivered by <span class="story-character">Artie üöõ</span> and <span class="story-character">Cappy üõµ</span>!</p>
                    
                    <p>Without <span class="story-character">Captain Heart ‚ù§Ô∏è</span> pumping oxygen through Body City, <span class="story-character">Skelly üí™</span> couldn't work! Without <span class="story-character">Bonnie ü¶¥</span> and <span class="story-character">Terry üîó</span>, there'd be nothing for <span class="story-character">Skelly üí™</span> to pull!</p>
                    
                    <div class="story-callout" style="font-size: 1.3em;">
                        üåü <strong>EVERYTHING IN YOUR BODY WORKS TOGETHER LIKE ONE AMAZING TEAM!</strong> üåü
                    </div>
                </div>
            </div>

            <div style="text-align: center; margin: 40px 0;">
                <button class="submit-btn" onclick="showSection('quiz')">Ready to Test Your Knowledge? Take the Quiz! üéâ</button>
            </div>
        </div>

        <!-- Quiz Section -->
        <div id="quiz" class="section">
            <button class="back-btn" onclick="showSection('mainMenu')">‚¨ÖÔ∏è Back to Menu</button>
            <div class="quiz-container">
                <h2 style="text-align: center; color: #764ba2; font-size: 2.2em; margin-bottom: 20px;">
                    ‚úèÔ∏è The Big Quiz! ‚úèÔ∏è
                </h2>
                <p style="text-align: center; font-size: 1.2em; margin-bottom: 20px;">
                    Answer all questions to see your score! üåü
                </p>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressBar">0%</div>
                </div>

                <div id="quizQuestions"></div>

                <div style="text-align: center;">
                    <button class="submit-btn" id="submitQuiz" onclick="submitQuiz()">üéâ Submit Quiz! üéâ</button>
                    <button class="submit-btn" id="retakeQuiz" onclick="retakeQuiz()" style="display:none;">üîÑ Try Again!</button>
                </div>

                <div id="scoreDisplay" style="display:none;"></div>
            </div>
        </div>
    </div>

    <script>
        // Memory Game Variables
        const memoryCards = [
            { id: 1, text: 'Heart', emoji: '‚ù§Ô∏è' },
            { id: 2, text: 'Arteries', emoji: 'üî¥' },
            { id: 3, text: 'Veins', emoji: 'üîµ' },
            { id: 4, text: 'Bones', emoji: 'ü¶¥' },
            { id: 5, text: 'Muscles', emoji: 'üí™' },
            { id: 6, text: 'Tendons', emoji: 'üîó' },
            { id: 7, text: 'Blood', emoji: 'ü©∏' },
            { id: 8, text: 'Joints', emoji: 'üéØ' }
        ];

        let memoryGameState = {
            cards: [],
            flippedCards: [],
            matchedPairs: 0,
            moves: 0
        };

        function initMemoryGame() {
            const doubled = [...memoryCards, ...memoryCards];
            memoryGameState.cards = doubled.sort(() => Math.random() - 0.5);
            memoryGameState.flippedCards = [];
            memoryGameState.matchedPairs = 0;
            memoryGameState.moves = 0;
            
            document.getElementById('moveCount').textContent = '0';
            document.getElementById('matchCount').textContent = '0';
            
            const board = document.getElementById('memoryGameBoard');
            board.innerHTML = '';
            
            memoryGameState.cards.forEach((card, index) => {
                const cardEl = document.createElement('div');
                cardEl.className = 'memory-card';
                cardEl.textContent = '?';
                cardEl.dataset.index = index;
                cardEl.dataset.id = card.id;
                cardEl.onclick = () => flipMemoryCard(index);
                board.appendChild(cardEl);
            });
        }

        function flipMemoryCard(index) {
            if (memoryGameState.flippedCards.length >= 2) return;
            
            const cards = document.querySelectorAll('.memory-card');
            const card = cards[index];
            
            if (card.classList.contains('flipped') || card.classList.contains('matched')) return;
            
            const cardData = memoryGameState.cards[index];
            card.textContent = cardData.emoji + ' ' + cardData.text;
            card.classList.add('flipped');
            memoryGameState.flippedCards.push({ index, id: cardData.id, element: card });
            
            if (memoryGameState.flippedCards.length === 2) {
                memoryGameState.moves++;
                document.getElementById('moveCount').textContent = memoryGameState.moves;
                
                setTimeout(checkMemoryMatch, 1000);
            }
        }

        function checkMemoryMatch() {
            const [card1, card2] = memoryGameState.flippedCards;
            
            if (card1.id === card2.id) {
                card1.element.classList.add('matched');
                card2.element.classList.add('matched');
                memoryGameState.matchedPairs++;
                document.getElementById('matchCount').textContent = memoryGameState.matchedPairs;
                
                showCelebration('üéâ');
                
                if (memoryGameState.matchedPairs === 8) {
                    setTimeout(() => {
                        alert('üéä Amazing! You matched all pairs in ' + memoryGameState.moves + ' moves! üéä');
                    }, 500);
                }
            } else {
                card1.element.textContent = '?';
                card2.element.textContent = '?';
                card1.element.classList.remove('flipped');
                card2.element.classList.remove('flipped');
            }
            
            memoryGameState.flippedCards = [];
        }

        function resetMemoryGame() {
            initMemoryGame();
        }

        // Click Game Variables
        let clickGameProgress = 0;

        function foundPart(element, name, info) {
            if (element.classList.contains('found')) return;
            
            element.classList.add('found');
            clickGameProgress++;
            document.getElementById('partsFound').textContent = clickGameProgress;
            
            showCelebration('‚≠ê');
            
            const feedback = document.getElementById('clickGameFeedback');
            feedback.innerHTML = `<div style="background: linear-gradient(135deg, #4caf50 0%, #81c784 100%); color: white; padding: 20px; border-radius: 15px; margin: 20px 0; animation: bounceIn 0.6s;">
                <div style="font-size: 2em; margin-bottom: 10px;">‚ú® ${name} ‚ú®</div>
                <div>${info}</div>
            </div>`;
            
            if (clickGameProgress === 10) {
                setTimeout(() => {
                    feedback.innerHTML += `<div style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white; padding: 30px; border-radius: 15px; margin: 20px 0; font-size: 1.5em; animation: bounceIn 0.8s;">
                        üèÜ CONGRATULATIONS! You found all 10 parts! You're a body systems expert! üèÜ
                    </div>`;
                }, 500);
            }
        }

        function resetClickGame() {
            clickGameProgress = 0;
            document.getElementById('partsFound').textContent = '0';
            document.getElementById('clickGameFeedback').innerHTML = '';
            document.querySelectorAll('.clickable-part').forEach(el => el.classList.remove('found'));
        }

        function showCelebration(emoji) {
            const celebration = document.createElement('div');
            celebration.className = 'celebration';
            celebration.textContent = emoji;
            document.body.appendChild(celebration);
            
            setTimeout(() => {
                celebration.remove();
            }, 1000);
        }

        // Quiz Data
        const quizData = [
            {
                type: 'multiple-choice',
                question: 'What is the main job of the circulatory system?',
                options: [
                    'To help us breathe',
                    'To move blood through the body',
                    'To protect our organs',
                    'To help us digest food'
                ],
                correct: 1
            },
            {
                type: 'multiple-choice',
                question: 'How many bones does the human body have?',
                options: ['106', '206', '306', '406'],
                correct: 1
            },
            {
                type: 'multiple-choice',
                question: 'What is the largest bone in your body?',
                options: ['Tibia', 'Humerus', 'Femur', 'Skull'],
                correct: 2
            },
            {
                type: 'true-false',
                question: 'Arteries carry blood away from the heart.',
                correct: true
            },
            {
                type: 'multiple-choice',
                question: 'What pumps blood to your whole body?',
                options: ['Veins', 'Heart', 'Arteries', 'Lungs'],
                correct: 1
            },
            {
                type: 'multiple-choice',
                question: 'What are the tiny blood vessels that connect arteries to veins?',
                options: ['Capillaries', 'Ventricles', 'Ligaments', 'Tendons'],
                correct: 0
            },
            {
                type: 'true-false',
                question: 'Smooth muscles work without your control.',
                correct: true
            },
            {
                type: 'multiple-choice',
                question: 'What mineral are bones mainly made of?',
                options: ['Iron', 'Calcium', 'Sodium', 'Potassium'],
                correct: 1
            },
            {
                type: 'true-false',
                question: 'You have over 1000 muscles in your body.',
                correct: false
            },
            {
                type: 'multiple-choice',
                question: 'What is a normal resting heart rate?',
                options: ['30-40 beats per minute', '70-80 beats per minute', '120-130 beats per minute', '150-160 beats per minute'],
                correct: 1
            },
            {
                type: 'true-false',
                question: 'Cardiac muscle works automatically without you thinking about it.',
                correct: true
            },
            {
                type: 'multiple-choice',
                question: 'What connects muscles to bones?',
                options: ['Ligaments', 'Tendons', 'Cartilage', 'Joints'],
                correct: 1
            },
            {
                type: 'true-false',
                question: 'Ligaments connect muscles to bones.',
                correct: false
            },
            {
                type: 'true-false',
                question: 'The skull protects the brain.',
                correct: true
            },
            {
                type: 'multiple-choice',
                question: 'Which muscle type can you control to walk or pick things up?',
                options: ['Smooth muscle', 'Cardiac muscle', 'Skeletal muscle', 'Heart muscle'],
                correct: 2
            },
            {
                type: 'true-false',
                question: 'Veins have thicker walls than arteries.',
                correct: false
            },
            {
                type: 'tap-match',
                question: 'Match each part to its correct job in the circulatory system:',
                pairs: [
                    { item: 'Heart', zone: 'Pumps blood to the body' },
                    { item: 'Arteries', zone: 'Carry blood away from heart' },
                    { item: 'Veins', zone: 'Bring blood back to heart' },
                    { item: 'Capillaries', zone: 'Connect arteries to veins' }
                ]
            },
            {
                type: 'true-false',
                question: 'A stroke happens when a blood vessel to the brain bursts or gets blocked.',
                correct: true
            },
            {
                type: 'multiple-choice',
                question: 'Where are the smallest bones in your body?',
                options: ['In your toes', 'In your fingers', 'In your inner ear', 'In your nose'],
                correct: 2
            },
            {
                type: 'tap-match',
                question: 'Match each muscle type to where it is found:',
                pairs: [
                    { item: 'Smooth Muscle', zone: 'Found in liver, kidneys, lungs' },
                    { item: 'Cardiac Muscle', zone: 'Makes up heart tissue' },
                    { item: 'Skeletal Muscle', zone: 'You can control voluntarily' }
                ]
            },
            {
                type: 'true-false',
                question: 'The rib cage protects the heart and lungs.',
                correct: true
            },
            {
                type: 'multiple-choice',
                question: 'What happens to your heart rate when you exercise?',
                options: [
                    'It stays the same',
                    'It speeds up to give muscles more oxygen',
                    'It slows down',
                    'It stops'
                ],
                correct: 1
            },
            {
                type: 'tap-match',
                question: 'Match each connector to its job:',
                pairs: [
                    { item: 'Tendons', zone: 'Connect muscles to bones' },
                    { item: 'Ligaments', zone: 'Connect bones to bones' },
                    { item: 'Cartilage', zone: 'Cushions joints' }
                ]
            },
            {
                type: 'multiple-choice',
                question: 'What disease makes bones weak and break easily?',
                options: ['Arthritis', 'Osteoporosis', 'Stroke', 'Hypertension'],
                correct: 1
            },
            {
                type: 'true-false',
                question: 'Cartilage is found near your joints.',
                correct: true
            },
            {
                type: 'multiple-choice',
                question: 'When do bones stop growing in length?',
                options: ['Age 10', 'Age 15', 'Late teens to early twenties', 'Age 30'],
                correct: 2
            },
            {
                type: 'true-false',
                question: 'Blood is bright red when it is full of oxygen.',
                correct: true
            },
            {
                type: 'multiple-choice',
                question: 'About how many muscles do you have?',
                options: ['Over 200', 'Over 400', 'Over 700', 'Over 1000'],
                correct: 2
            },
            {
                type: 'multiple-choice',
                question: 'What are pacemaker cells?',
                options: [
                    'Cells that help you walk faster',
                    'Special cells in cardiac muscle that make your heart beat',
                    'Cells in your brain',
                    'Cells that make bones grow'
                ],
                correct: 1
            },
            {
                type: 'multiple-choice',
                question: 'What is another name for high blood pressure?',
                options: ['Stroke', 'Hypertension', 'Arthritis', 'Osteoporosis'],
                correct: 1
            },
            {
                type: 'true-false',
                question: 'Arthritis causes swelling and pain in your joints.',
                correct: true
            },
            {
                type: 'multiple-choice',
                question: 'When do bones begin to develop?',
                options: [
                    'Around 6-7 weeks before birth',
                    'At birth',
                    'At age 5',
                    'At age 10'
                ],
                correct: 0
            },
            {
                type: 'true-false',
                question: 'Osteoporosis makes bones stronger.',
                correct: false
            },
            {
                type: 'multiple-choice',
                question: 'What is the correct path of blood circulation?',
                options: [
                    'Heart ‚Üí Veins ‚Üí Arteries ‚Üí Capillaries',
                    'Heart ‚Üí Arteries ‚Üí Capillaries ‚Üí Veins ‚Üí Back to Heart',
                    'Veins ‚Üí Heart ‚Üí Capillaries ‚Üí Arteries',
                    'Capillaries ‚Üí Veins ‚Üí Heart ‚Üí Arteries'
                ],
                correct: 1
            },
            {
                type: 'true-false',
                question: 'When you exercise, your heart rate stays exactly the same as when you rest.',
                correct: false
            },
            {
                type: 'multiple-choice',
                question: 'How do the skeletal and muscular systems work together?',
                options: [
                    'They don\'t work together',
                    'Muscles attach to bones and pull them to create movement',
                    'Bones attach to muscles to make them stronger',
                    'They only work together when you sleep'
                ],
                correct: 1
            },
            {
                type: 'multiple-choice',
                question: 'What can cause a stroke?',
                options: [
                    'Eating too much candy',
                    'A blood vessel to the brain bursting or getting blocked',
                    'Running too fast',
                    'Drinking too much water'
                ],
                correct: 1
            },
            {
                type: 'true-false',
                question: 'Cartilage helps cushion your joints so bones don\'t get damaged.',
                correct: true
            }
        ];

        let userAnswers = {};
        let tapMatchState = {}; // Stores {questionIndex: {selectedItem: itemElement, selectedZone: zoneElement, matches: {item: zone}}}

        function showSection(section) {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.getElementById(section).classList.add('active');
            
            if (section === 'memoryGame') {
                initMemoryGame();
            } else if (section === 'clickGame') {
                resetClickGame();
            } else if (section === 'quiz') {
                initializeQuiz();
            }
        }

        function initializeQuiz() {
            const container = document.getElementById('quizQuestions');
            container.innerHTML = '';
            userAnswers = {};
            
            quizData.forEach((q, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question-card';
                questionDiv.innerHTML = `
                    <span class="question-number">Question ${index + 1}</span>
                    <div class="question-text">${q.question}</div>
                `;

                if (q.type === 'multiple-choice') {
                    const optionsDiv = document.createElement('div');
                    optionsDiv.className = 'options';
                    q.options.forEach((option, optIndex) => {
                        const optionDiv = document.createElement('div');
                        optionDiv.className = 'option';
                        optionDiv.textContent = option;
                        optionDiv.onclick = () => selectOption(index, optIndex, optionDiv);
                        optionsDiv.appendChild(optionDiv);
                    });
                    questionDiv.appendChild(optionsDiv);
                } else if (q.type === 'true-false') {
                    const tfDiv = document.createElement('div');
                    tfDiv.style.textAlign = 'center';
                    tfDiv.innerHTML = `
                        <button class="true-false-btn true-btn" onclick="selectTrueFalse(${index}, true, this)">‚úÖ True</button>
                        <button class="true-false-btn false-btn" onclick="selectTrueFalse(${index}, false, this)">‚ùå False</button>
                    `;
                    questionDiv.appendChild(tfDiv);
                } else if (q.type === 'tap-match') {
                    const hint = document.createElement('div');
                    hint.className = 'tap-match-hint';
                    hint.innerHTML = 'üëÜ Tap an item on the left, then tap where it goes on the right! Tap again to unmatch! üëÜ';
                    questionDiv.appendChild(hint);

                    const tmContainer = document.createElement('div');
                    tmContainer.className = 'tap-match-container';
                    tmContainer.dataset.questionIndex = index;
                    
                    const tapItemsDiv = document.createElement('div');
                    tapItemsDiv.className = 'tap-items';
                    tapItemsDiv.innerHTML = '<strong style="font-size: 1.2em;">üëà Tap these items:</strong>';
                    
                    const tapZonesDiv = document.createElement('div');
                    tapZonesDiv.className = 'tap-zones';
                    tapZonesDiv.innerHTML = '<strong style="font-size: 1.2em;">üëâ Then tap where they go:</strong>';

                    const shuffledPairs = [...q.pairs].sort(() => Math.random() - 0.5);
                    
                    shuffledPairs.forEach((pair, pairIndex) => {
                        const tapItem = document.createElement('div');
                        tapItem.className = 'tap-item';
                        tapItem.textContent = pair.item;
                        tapItem.dataset.questionIndex = index;
                        tapItem.dataset.itemName = pair.item;
                        tapItem.dataset.correctZone = pair.zone;
                        tapItem.onclick = () => handleTapItem(tapItem);
                        
                        tapItemsDiv.appendChild(tapItem);
                    });

                    q.pairs.forEach((pair, pairIndex) => {
                        const tapZone = document.createElement('div');
                        tapZone.className = 'tap-zone';
                        tapZone.dataset.questionIndex = index;
                        tapZone.dataset.zoneName = pair.zone;
                        tapZone.innerHTML = `<div class="tap-zone-label">${pair.zone}</div>`;
                        tapZone.onclick = () => handleTapZone(tapZone);
                        
                        tapZonesDiv.appendChild(tapZone);
                    });

                    tmContainer.appendChild(tapItemsDiv);
                    tmContainer.appendChild(tapZonesDiv);
                    questionDiv.appendChild(tmContainer);
                }

                container.appendChild(questionDiv);
            });

            updateProgress();
        }

        // Tap to Match Functions
        function handleTapItem(itemElement) {
            const questionIndex = parseInt(itemElement.dataset.questionIndex);
            
            // Initialize state for this question if needed
            if (!tapMatchState[questionIndex]) {
                tapMatchState[questionIndex] = {
                    selectedItem: null,
                    selectedZone: null,
                    matches: {}
                };
            }
            
            const state = tapMatchState[questionIndex];
            
            // If this item is already matched, unmatch it
            if (itemElement.classList.contains('matched')) {
                const itemName = itemElement.dataset.itemName;
                delete state.matches[itemName];
                itemElement.classList.remove('matched');
                
                // Find and unmatch the corresponding zone
                const zones = document.querySelectorAll(`.tap-zone[data-question-index="${questionIndex}"]`);
                zones.forEach(zone => {
                    if (zone.dataset.zoneName === state.matches[itemName]) {
                        zone.classList.remove('matched');
                    }
                });
                
                updateProgress();
                return;
            }
            
            // Clear previous selection from items
            const allItems = document.querySelectorAll(`.tap-item[data-question-index="${questionIndex}"]`);
            allItems.forEach(item => {
                if (!item.classList.contains('matched')) {
                    item.classList.remove('selected');
                }
            });
            
            // Select this item
            itemElement.classList.add('selected');
            state.selectedItem = itemElement;
            
            // If a zone is already selected, make the match
            if (state.selectedZone) {
                makeMatch(questionIndex);
            }
        }
        
        function handleTapZone(zoneElement) {
            const questionIndex = parseInt(zoneElement.dataset.questionIndex);
            
            // Initialize state for this question if needed
            if (!tapMatchState[questionIndex]) {
                tapMatchState[questionIndex] = {
                    selectedItem: null,
                    selectedZone: null,
                    matches: {}
                };
            }
            
            const state = tapMatchState[questionIndex];
            
            // If this zone is already matched, unmatch it
            if (zoneElement.classList.contains('matched')) {
                const zoneName = zoneElement.dataset.zoneName;
                
                // Find the matched item and unmatch it
                const allItems = document.querySelectorAll(`.tap-item[data-question-index="${questionIndex}"]`);
                allItems.forEach(item => {
                    if (state.matches[item.dataset.itemName] === zoneName) {
                        delete state.matches[item.dataset.itemName];
                        item.classList.remove('matched');
                    }
                });
                
                zoneElement.classList.remove('matched');
                updateProgress();
                return;
            }
            
            // Clear previous selection from zones
            const allZones = document.querySelectorAll(`.tap-zone[data-question-index="${questionIndex}"]`);
            allZones.forEach(zone => {
                if (!zone.classList.contains('matched')) {
                    zone.classList.remove('selected');
                }
            });
            
            // Select this zone
            zoneElement.classList.add('selected');
            state.selectedZone = zoneElement;
            
            // If an item is already selected, make the match
            if (state.selectedItem) {
                makeMatch(questionIndex);
            }
        }
        
        function makeMatch(questionIndex) {
            const state = tapMatchState[questionIndex];
            
            if (!state.selectedItem || !state.selectedZone) return;
            
            const itemName = state.selectedItem.dataset.itemName;
            const zoneName = state.selectedZone.dataset.zoneName;
            
            // Record the match
            state.matches[itemName] = zoneName;
            
            // Mark as matched
            state.selectedItem.classList.remove('selected');
            state.selectedItem.classList.add('matched');
            state.selectedZone.classList.remove('selected');
            state.selectedZone.classList.add('matched');
            
            // Show celebration
            showCelebration('‚≠ê');
            
            // Clear selections
            state.selectedItem = null;
            state.selectedZone = null;
            
            // Update progress
            if (!userAnswers[questionIndex]) {
                userAnswers[questionIndex] = {};
            }
            userAnswers[questionIndex] = state.matches;
            updateProgress();
        }

        function selectOption(questionIndex, optionIndex, element) {
            element.parentElement.querySelectorAll('.option').forEach(opt => {
                opt.classList.remove('selected');
            });
            
            element.classList.add('selected');
            userAnswers[questionIndex] = optionIndex;
            showCelebration('‚≠ê');
            updateProgress();
        }

        function selectTrueFalse(questionIndex, answer, element) {
            element.parentElement.querySelectorAll('.true-false-btn').forEach(btn => {
                btn.classList.remove('selected');
            });
            
            element.classList.add('selected');
            userAnswers[questionIndex] = answer;
            showCelebration('‚≠ê');
            updateProgress();
        }

        function updateProgress() {
            const answered = Object.keys(userAnswers).length;
            const total = quizData.length;
            const percentage = Math.round((answered / total) * 100);
            
            const progressBar = document.getElementById('progressBar');
            progressBar.style.width = percentage + '%';
            progressBar.textContent = `${answered}/${total} answered`;
        }

        function submitQuiz() {
            let score = 0;
            let total = quizData.length;

            quizData.forEach((q, index) => {
                const questionCard = document.querySelectorAll('.question-card')[index];
                
                if (q.type === 'multiple-choice') {
                    const options = questionCard.querySelectorAll('.option');
                    options.forEach((opt, optIndex) => {
                        if (optIndex === q.correct) {
                            opt.classList.add('correct');
                        } else if (userAnswers[index] === optIndex) {
                            opt.classList.add('incorrect');
                        }
                    });
                    
                    if (userAnswers[index] === q.correct) {
                        score++;
                    }
                } else if (q.type === 'true-false') {
                    const buttons = questionCard.querySelectorAll('.true-false-btn');
                    buttons.forEach(btn => {
                        btn.disabled = true;
                        const isTrue = btn.textContent.includes('True');
                        if (isTrue === q.correct) {
                            btn.style.background = 'linear-gradient(135deg, #4caf50 0%, #81c784 100%)';
                            btn.style.color = 'white';
                        } else if (userAnswers[index] === isTrue) {
                            btn.style.background = 'linear-gradient(135deg, #f44336 0%, #e57373 100%)';
                            btn.style.color = 'white';
                        }
                    });
                    
                    if (userAnswers[index] === q.correct) {
                        score++;
                    }
                } else if (q.type === 'tap-match') {
                    let allCorrect = true;
                    const state = tapMatchState[index];
                    
                    if (!state || !state.matches) {
                        allCorrect = false;
                    } else {
                        // Check if all items are correctly matched
                        q.pairs.forEach(pair => {
                            if (state.matches[pair.item] !== pair.zone) {
                                allCorrect = false;
                            }
                        });
                    }
                    
                    // Visual feedback
                    const zones = questionCard.querySelectorAll('.tap-zone');
                    const items = questionCard.querySelectorAll('.tap-item');
                    
                    zones.forEach(zone => {
                        zone.style.pointerEvents = 'none';
                        const zoneName = zone.dataset.zoneName;
                        
                        // Find if any item is matched to this zone
                        let matchedCorrectly = false;
                        if (state && state.matches) {
                            for (const [itemName, matchedZone] of Object.entries(state.matches)) {
                                if (matchedZone === zoneName) {
                                    // Check if this is the correct match
                                    const correctPair = q.pairs.find(p => p.item === itemName);
                                    if (correctPair && correctPair.zone === zoneName) {
                                        matchedCorrectly = true;
                                        zone.classList.remove('matched');
                                        zone.classList.add('matched');
                                        zone.style.borderStyle = 'solid';
                                    } else {
                                        zone.classList.remove('matched');
                                        zone.classList.add('incorrect');
                                    }
                                }
                            }
                        }
                    });
                    
                    items.forEach(item => {
                        item.style.pointerEvents = 'none';
                    });
                    
                    if (allCorrect && q.pairs.length === Object.keys(state?.matches || {}).length) {
                        score++;
                    }
                }
            });

            const percentage = Math.round((score / total) * 100);
            let emoji = 'üåü';
            let message = 'Great job!';
            
            if (percentage >= 90) {
                emoji = 'üèÜ';
                message = 'OUTSTANDING! You\'re a science SUPERSTAR! üåü';
                for(let i = 0; i < 10; i++) {
                    setTimeout(() => showCelebration('üéâ'), i * 200);
                }
            } else if (percentage >= 80) {
                emoji = '‚≠ê';
                message = 'EXCELLENT work! You really know your stuff!';
                for(let i = 0; i < 5; i++) {
                    setTimeout(() => showCelebration('‚≠ê'), i * 200);
                }
            } else if (percentage >= 70) {
                emoji = 'üëç';
                message = 'Good job! Keep studying and you\'ll ace that test!';
            } else {
                emoji = 'üìö';
                message = 'Keep practicing! Go through the flip cards again!';
            }

            document.getElementById('scoreDisplay').innerHTML = `
                <div style="font-size: 4em; margin-bottom: 20px; animation: bounce 1s ease infinite;">${emoji}</div>
                <div style="font-size: 1.8em; margin-bottom: 15px;">${message}</div>
                <div style="font-size: 3em; margin-top: 20px; font-weight: bold;">Score: ${score}/${total}</div>
                <div style="font-size: 2.5em; margin-top: 10px;">${percentage}%</div>
            `;
            document.getElementById('scoreDisplay').style.display = 'block';
            document.getElementById('submitQuiz').style.display = 'none';
            document.getElementById('retakeQuiz').style.display = 'inline-block';

            document.getElementById('scoreDisplay').scrollIntoView({ behavior: 'smooth', block: 'center' });
        }

        function retakeQuiz() {
            document.getElementById('scoreDisplay').style.display = 'none';
            document.getElementById('submitQuiz').style.display = 'inline-block';
            document.getElementById('retakeQuiz').style.display = 'none';
            tapMatchState = {}; // Reset tap-match state
            initializeQuiz();
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        window.addEventListener('load', () => {
            showSection('mainMenu');
        });
    </script>
</body>
</html>
