<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üéÆ Science Adventure - Body Systems üéÆ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
        }

        h1 {
            text-align: center;
            color: #764ba2;
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
            animation: bounce 1s ease infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .subtitle {
            text-align: center;
            color: #667eea;
            font-size: 1.3em;
            margin-bottom: 30px;
            font-weight: bold;
        }

        .main-menu {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .menu-card {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .menu-card:hover {
            transform: scale(1.05) translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.3);
        }

        .menu-card.learn {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
        }

        .menu-card.game {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
        }

        .menu-card.quiz {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        }

        .menu-card h2 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .menu-card p {
            font-size: 1.2em;
            color: #333;
            font-weight: bold;
        }

        .section {
            display: none;
        }

        .section.active {
            display: block;
            animation: slideIn 0.5s;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-50px); }
            to { opacity: 1; transform: translateX(0); }
        }

        .back-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1.1em;
            margin-bottom: 20px;
            font-weight: bold;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            transition: all 0.3s;
        }

        .back-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 15px rgba(0,0,0,0.3);
        }

        /* Interactive Learning Cards */
        .flip-card-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .flip-card {
            background-color: transparent;
            width: 100%;
            height: 300px;
            perspective: 1000px;
            cursor: pointer;
        }

        .flip-card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }

        .flip-card.flipped .flip-card-inner {
            transform: rotateY(180deg);
        }

        .flip-card-front, .flip-card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
            border-radius: 15px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 20px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.2);
        }

        .flip-card-front {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .flip-card-back {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            transform: rotateY(180deg);
        }

        .flip-card-front h3 {
            font-size: 1.8em;
            margin: 15px 0;
        }

        .flip-card-front .emoji {
            font-size: 3em;
        }

        .flip-card-back p {
            font-size: 1.1em;
            line-height: 1.6;
        }

        .flip-instruction {
            text-align: center;
            font-size: 1.3em;
            color: #667eea;
            margin: 20px 0;
            font-weight: bold;
            animation: pulse 2s ease infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        /* Memory Game */
        .memory-game {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin: 30px auto;
            max-width: 600px;
        }

        .memory-card {
            aspect-ratio: 1;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 10px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2em;
            color: white;
            font-weight: bold;
            transition: all 0.3s;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        .memory-card:hover {
            transform: scale(1.05);
        }

        .memory-card.flipped {
            background: white;
            color: #333;
        }

        .memory-card.matched {
            background: linear-gradient(135deg, #4caf50 0%, #81c784 100%);
            color: white;
            cursor: default;
        }

        .game-stats {
            text-align: center;
            margin: 20px 0;
            font-size: 1.3em;
            font-weight: bold;
            color: #667eea;
        }

        /* Body Parts Click Game */
        .topic-section {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            padding: 30px;
            margin: 20px 0;
            border-radius: 20px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .clickable-part {
            position: relative;
            background: rgba(102, 126, 234, 0.7);
            border: 3px solid #764ba2;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
            font-size: 1.2em;
        }

        .clickable-part:hover {
            background: rgba(246, 147, 251, 0.9);
            transform: scale(1.05);
        }

        .clickable-part.found {
            background: rgba(76, 175, 80, 0.8);
            cursor: default;
        }

        /* Quiz Styles */
        .quiz-container {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
        }

        .question-card {
            background: white;
            padding: 25px;
            margin-bottom: 20px;
            border-radius: 10px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
            border: 3px solid transparent;
            transition: all 0.3s;
        }

        .question-card:hover {
            border-color: #667eea;
            transform: translateX(5px);
        }

        .question-number {
            display: inline-block;
            background: #667eea;
            color: white;
            padding: 8px 20px;
            border-radius: 25px;
            margin-bottom: 15px;
            font-weight: bold;
            font-size: 1.1em;
        }

        .question-text {
            font-size: 1.3em;
            margin-bottom: 20px;
            color: #333;
            font-weight: bold;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .option {
            padding: 18px;
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            border: 3px solid transparent;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1.2em;
            font-weight: bold;
        }

        .option:hover {
            transform: translateX(10px) scale(1.02);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .option.selected {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-color: #f5576c;
            animation: wiggle 0.5s;
        }

        @keyframes wiggle {
            0%, 100% { transform: rotate(0deg); }
            25% { transform: rotate(-5deg); }
            75% { transform: rotate(5deg); }
        }

        .option.correct {
            background: linear-gradient(135deg, #4caf50 0%, #81c784 100%);
            color: white;
            border-color: #2e7d32;
            animation: celebrate 0.6s;
        }

        @keyframes celebrate {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .option.incorrect {
            background: linear-gradient(135deg, #f44336 0%, #e57373 100%);
            color: white;
            border-color: #c62828;
            animation: shake 0.5s;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        /* Drag and Drop */
        .drag-drop-container {
            display: flex;
            gap: 30px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .draggables {
            flex: 1;
            min-width: 250px;
        }

        .drop-zones {
            flex: 1;
            min-width: 250px;
        }

        .draggable {
            background: linear-gradient(135deg, #84fab0 0%, #8fd3f4 100%);
            padding: 18px;
            margin: 12px 0;
            border-radius: 12px;
            cursor: move;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            font-weight: bold;
            text-align: center;
            touch-action: none;
            user-select: none;
            font-size: 1.1em;
            transition: all 0.3s;
        }

        .draggable:hover {
            transform: scale(1.05) rotate(2deg);
        }

        .draggable.dragging {
            opacity: 0.5;
            transform: scale(1.1);
        }

        .drop-zone {
            background: #f0f0f0;
            border: 4px dashed #999;
            padding: 18px;
            margin: 12px 0;
            border-radius: 12px;
            min-height: 70px;
            transition: all 0.3s;
        }

        .drop-zone.drag-over {
            background: #e3f2fd;
            border-color: #2196f3;
            transform: scale(1.05);
        }

        .drop-zone-label {
            font-weight: bold;
            color: #666;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .drop-zone.correct {
            background: #c8e6c9;
            border-color: #4caf50;
            animation: success-pulse 0.6s;
        }

        @keyframes success-pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .drop-zone.incorrect {
            background: #ffcdd2;
            border-color: #f44336;
            animation: error-shake 0.5s;
        }

        @keyframes error-shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-8px); }
            75% { transform: translateX(8px); }
        }

        .submit-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 18px 45px;
            font-size: 1.4em;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            margin-top: 30px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            transition: all 0.3s;
            font-weight: bold;
        }

        .submit-btn:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
        }

        .submit-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        .score-display {
            text-align: center;
            font-size: 2em;
            padding: 40px;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            border-radius: 15px;
            margin: 20px 0;
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
            animation: bounceIn 0.8s;
        }

        @keyframes bounceIn {
            0% { transform: scale(0); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .emoji {
            font-size: 1.5em;
            margin-right: 10px;
        }

        .progress-bar {
            width: 100%;
            height: 35px;
            background: #e0e0e0;
            border-radius: 20px;
            overflow: hidden;
            margin-bottom: 20px;
            box-shadow: inset 0 2px 5px rgba(0,0,0,0.1);
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 1.1em;
        }

        .true-false-btn {
            padding: 25px 50px;
            font-size: 1.4em;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            margin: 15px;
            transition: all 0.3s;
            font-weight: bold;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .true-btn {
            background: linear-gradient(135deg, #84fab0 0%, #8fd3f4 100%);
        }

        .false-btn {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
        }

        .true-false-btn:hover {
            transform: scale(1.1) rotate(3deg);
            box-shadow: 0 8px 20px rgba(0,0,0,0.3);
        }

        .true-false-btn.selected {
            box-shadow: 0 0 0 5px #764ba2;
            transform: scale(1.15);
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 2em;
            }

            .container {
                padding: 15px;
            }

            .memory-game {
                grid-template-columns: repeat(3, 1fr);
            }

            .true-false-btn {
                padding: 18px 35px;
                font-size: 1.2em;
            }
        }

        .celebration {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 5em;
            z-index: 1000;
            animation: explode 1s ease-out forwards;
            pointer-events: none;
        }

        @keyframes explode {
            0% {
                transform: translate(-50%, -50%) scale(0);
                opacity: 1;
            }
            100% {
                transform: translate(-50%, -50%) scale(3);
                opacity: 0;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üéÆ Science Adventure! üéÆ</h1>
        <div class="subtitle">Get Ready for Your Test on November 3rd!</div>

        <!-- Main Menu -->
        <div id="mainMenu" class="section active">
            <div class="main-menu">
                <div class="menu-card learn" onclick="showSection('flipCards')">
                    <h2>üìö</h2>
                    <p>Learn with Flip Cards!</p>
                    <p style="font-size: 0.9em; margin-top: 10px;">Click cards to reveal secrets!</p>
                </div>
                <div class="menu-card game" onclick="showSection('memoryGame')">
                    <h2>üéØ</h2>
                    <p>Memory Match Game!</p>
                    <p style="font-size: 0.9em; margin-top: 10px;">Match the pairs!</p>
                </div>
                <div class="menu-card game" onclick="showSection('clickGame')">
                    <h2>üé™</h2>
                    <p>Body Parts Challenge!</p>
                    <p style="font-size: 0.9em; margin-top: 10px;">Find all body parts!</p>
                </div>
                <div class="menu-card quiz" onclick="showSection('quiz')">
                    <h2>‚úèÔ∏è</h2>
                    <p>Take the Big Quiz!</p>
                    <p style="font-size: 0.9em; margin-top: 10px;">Show what you know!</p>
                </div>
            </div>
        </div>

        <!-- Flip Cards Section -->
        <div id="flipCards" class="section">
            <button class="back-btn" onclick="showSection('mainMenu')">‚¨ÖÔ∏è Back to Menu</button>
            <h2 style="text-align: center; color: #764ba2; font-size: 2em; margin-bottom: 20px;">
                Click Each Card to Learn! ‚ú®
            </h2>
            <p class="flip-instruction">üëÜ Tap or Click the Cards! üëÜ</p>

            <h3 style="text-align: center; color: #667eea; font-size: 1.8em; margin: 30px 0;">‚ù§Ô∏è Circulatory System</h3>
            <div class="flip-card-container">
                <div class="flip-card" onclick="this.classList.toggle('flipped')">
                    <div class="flip-card-inner">
                        <div class="flip-card-front">
                            <span class="emoji">‚ù§Ô∏è</span>
                            <h3>Heart</h3>
                            <p>Click me!</p>
                        </div>
                        <div class="flip-card-back">
                            <p>The heart pumps blood to your whole body! It's made of cardiac muscle and works automatically without you thinking about it! üí™</p>
                        </div>
                    </div>
                </div>

                <div class="flip-card" onclick="this.classList.toggle('flipped')">
                    <div class="flip-card-inner">
                        <div class="flip-card-front">
                            <span class="emoji">üî¥</span>
                            <h3>Arteries</h3>
                            <p>Click me!</p>
                        </div>
                        <div class="flip-card-back">
                            <p>Arteries carry oxygen-rich blood AWAY from your heart to all parts of your body! They have thick walls to handle the pressure! üí™</p>
                        </div>
                    </div>
                </div>

                <div class="flip-card" onclick="this.classList.toggle('flipped')">
                    <div class="flip-card-inner">
                        <div class="flip-card-front">
                            <span class="emoji">üîµ</span>
                            <h3>Veins</h3>
                            <p>Click me!</p>
                        </div>
                        <div class="flip-card-back">
                            <p>Veins bring blood BACK to your heart so it can get more oxygen! They have thinner walls than arteries! üîÑ</p>
                        </div>
                    </div>
                </div>

                <div class="flip-card" onclick="this.classList.toggle('flipped')">
                    <div class="flip-card-inner">
                        <div class="flip-card-front">
                            <span class="emoji">üåü</span>
                            <h3>Capillaries</h3>
                            <p>Click me!</p>
                        </div>
                        <div class="flip-card-back">
                            <p>Tiny blood vessels that connect arteries to veins! This is where oxygen moves from blood to your cells! ‚ú®</p>
                        </div>
                    </div>
                </div>

                <div class="flip-card" onclick="this.classList.toggle('flipped')">
                    <div class="flip-card-inner">
                        <div class="flip-card-front">
                            <span class="emoji">ü©∏</span>
                            <h3>Blood</h3>
                            <p>Click me!</p>
                        </div>
                        <div class="flip-card-back">
                            <p>Blood carries oxygen and nutrients to all your cells! Without oxygen, your cells would die! Blood is bright red when full of oxygen! üåà</p>
                        </div>
                    </div>
                </div>

                <div class="flip-card" onclick="this.classList.toggle('flipped')">
                    <div class="flip-card-inner">
                        <div class="flip-card-front">
                            <span class="emoji">üèÉ</span>
                            <h3>Heart Rate</h3>
                            <p>Click me!</p>
                        </div>
                        <div class="flip-card-back">
                            <p>At rest: 70-80 beats per minute. After exercise: 100-140 beats! Your heart speeds up to give muscles more oxygen! üíì</p>
                        </div>
                    </div>
                </div>

                <div class="flip-card" onclick="this.classList.toggle('flipped')">
                    <div class="flip-card-inner">
                        <div class="flip-card-front">
                            <span class="emoji">‚ö°</span>
                            <h3>Pacemaker Cells</h3>
                            <p>Click me!</p>
                        </div>
                        <div class="flip-card-back">
                            <p>Special cells in cardiac muscle that make your heart beat automatically! They're like tiny electrical batteries that keep your heart pumping! ‚ö°</p>
                        </div>
                    </div>
                </div>

                <div class="flip-card" onclick="this.classList.toggle('flipped')">
                    <div class="flip-card-inner">
                        <div class="flip-card-front">
                            <span class="emoji">üî¥</span>
                            <h3>High Blood Pressure</h3>
                            <p>Click me!</p>
                        </div>
                        <div class="flip-card-back">
                            <p>When blood pushes too hard against blood vessel walls! Can cause vessels to weaken or burst. Also called Hypertension. ü©∫</p>
                        </div>
                    </div>
                </div>

                <div class="flip-card" onclick="this.classList.toggle('flipped')">
                    <div class="flip-card-inner">
                        <div class="flip-card-front">
                            <span class="emoji">üß†</span>
                            <h3>Stroke</h3>
                            <p>Click me!</p>
                        </div>
                        <div class="flip-card-back">
                            <p>Happens when a blood vessel to the brain bursts or gets blocked! The brain can't get oxygen and blood, causing brain cells to die. ‚ö†Ô∏è</p>
                        </div>
                    </div>
                </div>

                <div class="flip-card" onclick="this.classList.toggle('flipped')">
                    <div class="flip-card-inner">
                        <div class="flip-card-front">
                            <span class="emoji">üîÑ</span>
                            <h3>Blood Circulation</h3>
                            <p>Click me!</p>
                        </div>
                        <div class="flip-card-back">
                            <p>Heart ‚Üí Arteries ‚Üí Capillaries (oxygen moves to cells!) ‚Üí Veins ‚Üí Back to Heart! This cycle repeats constantly to keep you alive! üîÑ</p>
                        </div>
                    </div>
                </div>
            </div>

            <h3 style="text-align: center; color: #667eea; font-size: 1.8em; margin: 30px 0;">ü¶¥ Musculoskeletal System</h3>
            <div class="flip-card-container">
                <div class="flip-card" onclick="this.classList.toggle('flipped')">
                    <div class="flip-card-inner">
                        <div class="flip-card-front">
                            <span class="emoji">ü¶¥</span>
                            <h3>Bones</h3>
                            <p>Click me!</p>
                        </div>
                        <div class="flip-card-back">
                            <p>You have 206 bones! They're made of calcium. The femur is the biggest bone. The smallest bones are in your ear! ü¶ª</p>
                        </div>
                    </div>
                </div>

                <div class="flip-card" onclick="this.classList.toggle('flipped')">
                    <div class="flip-card-inner">
                        <div class="flip-card-front">
                            <span class="emoji">üí™</span>
                            <h3>Skeletal Muscle</h3>
                            <p>Click me!</p>
                        </div>
                        <div class="flip-card-back">
                            <p>Muscles YOU control! They attach to bones with tendons. When they contract, they pull bones to move! You have over 700 muscles! üíØ</p>
                        </div>
                    </div>
                </div>

                <div class="flip-card" onclick="this.classList.toggle('flipped')">
                    <div class="flip-card-inner">
                        <div class="flip-card-front">
                            <span class="emoji">üåä</span>
                            <h3>Smooth Muscle</h3>
                            <p>Click me!</p>
                        </div>
                        <div class="flip-card-back">
                            <p>Muscles that work WITHOUT your control! Found in your liver, kidneys, and lungs. They keep you alive automatically! ü§ñ</p>
                        </div>
                    </div>
                </div>

                <div class="flip-card" onclick="this.classList.toggle('flipped')">
                    <div class="flip-card-inner">
                        <div class="flip-card-front">
                            <span class="emoji">üîó</span>
                            <h3>Tendons</h3>
                            <p>Click me!</p>
                        </div>
                        <div class="flip-card-back">
                            <p>Tendons connect MUSCLES to BONES! They help you move by pulling bones when muscles contract! üé£</p>
                        </div>
                    </div>
                </div>

                <div class="flip-card" onclick="this.classList.toggle('flipped')">
                    <div class="flip-card-inner">
                        <div class="flip-card-front">
                            <span class="emoji">üîó</span>
                            <h3>Ligaments</h3>
                            <p>Click me!</p>
                        </div>
                        <div class="flip-card-back">
                            <p>Ligaments connect BONES to other BONES! They help hold your skeleton together! üß©</p>
                        </div>
                    </div>
                </div>

                <div class="flip-card" onclick="this.classList.toggle('flipped')">
                    <div class="flip-card-inner">
                        <div class="flip-card-front">
                            <span class="emoji">üéØ</span>
                            <h3>Joints & Cartilage</h3>
                            <p>Click me!</p>
                        </div>
                        <div class="flip-card-back">
                            <p>Joints are where bones meet! Cartilage cushions them so they don't get damaged when you move! üõ°Ô∏è</p>
                        </div>
                    </div>
                </div>

                <div class="flip-card" onclick="this.classList.toggle('flipped')">
                    <div class="flip-card-inner">
                        <div class="flip-card-front">
                            <span class="emoji">ü¶¥</span>
                            <h3>Bone Growth</h3>
                            <p>Click me!</p>
                        </div>
                        <div class="flip-card-back">
                            <p>Bones start growing around week 6-7 before you're born! They grow mostly during childhood and stop growing around late teens to early twenties (age 20)! üìè</p>
                        </div>
                    </div>
                </div>

                <div class="flip-card" onclick="this.classList.toggle('flipped')">
                    <div class="flip-card-inner">
                        <div class="flip-card-front">
                            <span class="emoji">üò£</span>
                            <h3>Arthritis</h3>
                            <p>Click me!</p>
                        </div>
                        <div class="flip-card-back">
                            <p>A disease that causes swelling and pain in joints! Can happen from lack of cartilage or wear and tear on the body. Causes joint pain and stiffness! ü©π</p>
                        </div>
                    </div>
                </div>

                <div class="flip-card" onclick="this.classList.toggle('flipped')">
                    <div class="flip-card-inner">
                        <div class="flip-card-front">
                            <span class="emoji">üíî</span>
                            <h3>Osteoporosis</h3>
                            <p>Click me!</p>
                        </div>
                        <div class="flip-card-back">
                            <p>A disease where bones become weak and break easily! Happens when the body loses too much bone or makes too little bone. Bones can break more easily than normal! üè•</p>
                        </div>
                    </div>
                </div>

                <div class="flip-card" onclick="this.classList.toggle('flipped')">
                    <div class="flip-card-inner">
                        <div class="flip-card-front">
                            <span class="emoji">ü§ù</span>
                            <h3>Systems Working Together</h3>
                            <p>Click me!</p>
                        </div>
                        <div class="flip-card-back">
                            <p>Bones give structure and support! Muscles attach to bones with tendons! When muscles contract, they pull bones to create movement! They work as a team! üí™ü¶¥</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Memory Game Section -->
        <div id="memoryGame" class="section">
            <button class="back-btn" onclick="showSection('mainMenu')">‚¨ÖÔ∏è Back to Menu</button>
            <h2 style="text-align: center; color: #764ba2; font-size: 2em; margin-bottom: 20px;">
                üéØ Memory Match Challenge! üéØ
            </h2>
            <p style="text-align: center; font-size: 1.2em; margin-bottom: 20px;">
                Find matching pairs of body system terms!
            </p>
            <div class="game-stats">
                <div>Moves: <span id="moveCount">0</span> | Matches: <span id="matchCount">0</span>/8</div>
            </div>
            <div class="memory-game" id="memoryGameBoard"></div>
            <div style="text-align: center; margin-top: 20px;">
                <button class="submit-btn" onclick="resetMemoryGame()">üîÑ Play Again</button>
            </div>
        </div>

        <!-- Click Game Section -->
        <div id="clickGame" class="section">
            <button class="back-btn" onclick="showSection('mainMenu')">‚¨ÖÔ∏è Back to Menu</button>
            <h2 style="text-align: center; color: #764ba2; font-size: 2em; margin-bottom: 20px;">
                üé™ Find the Body Parts Challenge! üé™
            </h2>
            <p style="text-align: center; font-size: 1.2em; margin-bottom: 20px;">
                Click on all the highlighted parts to learn about them!
            </p>
            <div class="game-stats">
                <div>Found: <span id="partsFound">0</span>/10</div>
            </div>
            
            <div class="topic-section">
                <h3 style="color: #764ba2; text-align: center;">‚ù§Ô∏è Circulatory System Parts</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-top: 20px;">
                    <div class="clickable-part" style="width: 100%; height: 80px; border-radius: 12px;" onclick="foundPart(this, 'Heart', 'Pumps blood throughout your body!')">
                        ‚ù§Ô∏è Heart
                    </div>
                    <div class="clickable-part" style="width: 100%; height: 80px; border-radius: 12px;" onclick="foundPart(this, 'Arteries', 'Carry blood away from the heart!')">
                        üî¥ Arteries
                    </div>
                    <div class="clickable-part" style="width: 100%; height: 80px; border-radius: 12px;" onclick="foundPart(this, 'Veins', 'Bring blood back to the heart!')">
                        üîµ Veins
                    </div>
                    <div class="clickable-part" style="width: 100%; height: 80px; border-radius: 12px;" onclick="foundPart(this, 'Capillaries', 'Tiny vessels connecting arteries and veins!')">
                        üåü Capillaries
                    </div>
                    <div class="clickable-part" style="width: 100%; height: 80px; border-radius: 12px;" onclick="foundPart(this, 'Blood', 'Carries oxygen and nutrients!')">
                        ü©∏ Blood
                    </div>
                </div>
            </div>

            <div class="topic-section" style="margin-top: 30px;">
                <h3 style="color: #764ba2; text-align: center;">ü¶¥ Musculoskeletal System Parts</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-top: 20px;">
                    <div class="clickable-part" style="width: 100%; height: 80px; border-radius: 12px;" onclick="foundPart(this, 'Bones', 'You have 206 bones made of calcium!')">
                        ü¶¥ Bones
                    </div>
                    <div class="clickable-part" style="width: 100%; height: 80px; border-radius: 12px;" onclick="foundPart(this, 'Skeletal Muscle', 'Muscles you can control!')">
                        üí™ Skeletal Muscle
                    </div>
                    <div class="clickable-part" style="width: 100%; height: 80px; border-radius: 12px;" onclick="foundPart(this, 'Smooth Muscle', 'Works automatically without control!')">
                        üåä Smooth Muscle
                    </div>
                    <div class="clickable-part" style="width: 100%; height: 80px; border-radius: 12px;" onclick="foundPart(this, 'Tendons', 'Connect muscles to bones!')">
                        üîó Tendons
                    </div>
                    <div class="clickable-part" style="width: 100%; height: 80px; border-radius: 12px;" onclick="foundPart(this, 'Ligaments', 'Connect bones to bones!')">
                        üîó Ligaments
                    </div>
                </div>
            </div>

            <div id="clickGameFeedback" style="text-align: center; margin-top: 30px; font-size: 1.5em; font-weight: bold; color: #667eea;"></div>
        </div>

        <!-- Quiz Section -->
        <div id="quiz" class="section">
            <button class="back-btn" onclick="showSection('mainMenu')">‚¨ÖÔ∏è Back to Menu</button>
            <div class="quiz-container">
                <h2 style="text-align: center; color: #764ba2; font-size: 2.2em; margin-bottom: 20px;">
                    ‚úèÔ∏è The Big Quiz! ‚úèÔ∏è
                </h2>
                <p style="text-align: center; font-size: 1.2em; margin-bottom: 20px;">
                    Answer all questions to see your score! üåü
                </p>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressBar">0%</div>
                </div>

                <div id="quizQuestions"></div>

                <div style="text-align: center;">
                    <button class="submit-btn" id="submitQuiz" onclick="submitQuiz()">üéâ Submit Quiz! üéâ</button>
                    <button class="submit-btn" id="retakeQuiz" onclick="retakeQuiz()" style="display:none;">üîÑ Try Again!</button>
                </div>

                <div id="scoreDisplay" style="display:none;"></div>
            </div>
        </div>
    </div>

    <script>
        // Memory Game Variables
        const memoryCards = [
            { id: 1, text: 'Heart', emoji: '‚ù§Ô∏è' },
            { id: 2, text: 'Arteries', emoji: 'üî¥' },
            { id: 3, text: 'Veins', emoji: 'üîµ' },
            { id: 4, text: 'Bones', emoji: 'ü¶¥' },
            { id: 5, text: 'Muscles', emoji: 'üí™' },
            { id: 6, text: 'Tendons', emoji: 'üîó' },
            { id: 7, text: 'Blood', emoji: 'ü©∏' },
            { id: 8, text: 'Joints', emoji: 'üéØ' }
        ];

        let memoryGameState = {
            cards: [],
            flippedCards: [],
            matchedPairs: 0,
            moves: 0
        };

        function initMemoryGame() {
            const doubled = [...memoryCards, ...memoryCards];
            memoryGameState.cards = doubled.sort(() => Math.random() - 0.5);
            memoryGameState.flippedCards = [];
            memoryGameState.matchedPairs = 0;
            memoryGameState.moves = 0;
            
            document.getElementById('moveCount').textContent = '0';
            document.getElementById('matchCount').textContent = '0';
            
            const board = document.getElementById('memoryGameBoard');
            board.innerHTML = '';
            
            memoryGameState.cards.forEach((card, index) => {
                const cardEl = document.createElement('div');
                cardEl.className = 'memory-card';
                cardEl.textContent = '?';
                cardEl.dataset.index = index;
                cardEl.dataset.id = card.id;
                cardEl.onclick = () => flipMemoryCard(index);
                board.appendChild(cardEl);
            });
        }

        function flipMemoryCard(index) {
            if (memoryGameState.flippedCards.length >= 2) return;
            
            const cards = document.querySelectorAll('.memory-card');
            const card = cards[index];
            
            if (card.classList.contains('flipped') || card.classList.contains('matched')) return;
            
            const cardData = memoryGameState.cards[index];
            card.textContent = cardData.emoji + ' ' + cardData.text;
            card.classList.add('flipped');
            memoryGameState.flippedCards.push({ index, id: cardData.id, element: card });
            
            if (memoryGameState.flippedCards.length === 2) {
                memoryGameState.moves++;
                document.getElementById('moveCount').textContent = memoryGameState.moves;
                
                setTimeout(checkMemoryMatch, 1000);
            }
        }

        function checkMemoryMatch() {
            const [card1, card2] = memoryGameState.flippedCards;
            
            if (card1.id === card2.id) {
                card1.element.classList.add('matched');
                card2.element.classList.add('matched');
                memoryGameState.matchedPairs++;
                document.getElementById('matchCount').textContent = memoryGameState.matchedPairs;
                
                showCelebration('üéâ');
                
                if (memoryGameState.matchedPairs === 8) {
                    setTimeout(() => {
                        alert('üéä Amazing! You matched all pairs in ' + memoryGameState.moves + ' moves! üéä');
                    }, 500);
                }
            } else {
                card1.element.textContent = '?';
                card2.element.textContent = '?';
                card1.element.classList.remove('flipped');
                card2.element.classList.remove('flipped');
            }
            
            memoryGameState.flippedCards = [];
        }

        function resetMemoryGame() {
            initMemoryGame();
        }

        // Click Game Variables
        let clickGameProgress = 0;

        function foundPart(element, name, info) {
            if (element.classList.contains('found')) return;
            
            element.classList.add('found');
            clickGameProgress++;
            document.getElementById('partsFound').textContent = clickGameProgress;
            
            showCelebration('‚≠ê');
            
            const feedback = document.getElementById('clickGameFeedback');
            feedback.innerHTML = `<div style="background: linear-gradient(135deg, #4caf50 0%, #81c784 100%); color: white; padding: 20px; border-radius: 15px; margin: 20px 0; animation: bounceIn 0.6s;">
                <div style="font-size: 2em; margin-bottom: 10px;">‚ú® ${name} ‚ú®</div>
                <div>${info}</div>
            </div>`;
            
            if (clickGameProgress === 10) {
                setTimeout(() => {
                    feedback.innerHTML += `<div style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white; padding: 30px; border-radius: 15px; margin: 20px 0; font-size: 1.5em; animation: bounceIn 0.8s;">
                        üèÜ CONGRATULATIONS! You found all 10 parts! You're a body systems expert! üèÜ
                    </div>`;
                }, 500);
            }
        }

        function resetClickGame() {
            clickGameProgress = 0;
            document.getElementById('partsFound').textContent = '0';
            document.getElementById('clickGameFeedback').innerHTML = '';
            document.querySelectorAll('.clickable-part').forEach(el => el.classList.remove('found'));
        }

        function showCelebration(emoji) {
            const celebration = document.createElement('div');
            celebration.className = 'celebration';
            celebration.textContent = emoji;
            document.body.appendChild(celebration);
            
            setTimeout(() => {
                celebration.remove();
            }, 1000);
        }

        // Quiz Data
        const quizData = [
            {
                type: 'multiple-choice',
                question: 'What is the main job of the circulatory system?',
                options: [
                    'To help us breathe',
                    'To move blood through the body',
                    'To protect our organs',
                    'To help us digest food'
                ],
                correct: 1
            },
            {
                type: 'multiple-choice',
                question: 'How many bones does the human body have?',
                options: ['106', '206', '306', '406'],
                correct: 1
            },
            {
                type: 'multiple-choice',
                question: 'What is the largest bone in your body?',
                options: ['Tibia', 'Humerus', 'Femur', 'Skull'],
                correct: 2
            },
            {
                type: 'true-false',
                question: 'Arteries carry blood away from the heart.',
                correct: true
            },
            {
                type: 'multiple-choice',
                question: 'What pumps blood to your whole body?',
                options: ['Veins', 'Heart', 'Arteries', 'Lungs'],
                correct: 1
            },
            {
                type: 'multiple-choice',
                question: 'What are the tiny blood vessels that connect arteries to veins?',
                options: ['Capillaries', 'Ventricles', 'Ligaments', 'Tendons'],
                correct: 0
            },
            {
                type: 'true-false',
                question: 'Smooth muscles work without your control.',
                correct: true
            },
            {
                type: 'multiple-choice',
                question: 'What mineral are bones mainly made of?',
                options: ['Iron', 'Calcium', 'Sodium', 'Potassium'],
                correct: 1
            },
            {
                type: 'true-false',
                question: 'You have over 1000 muscles in your body.',
                correct: false
            },
            {
                type: 'multiple-choice',
                question: 'What is a normal resting heart rate?',
                options: ['30-40 beats per minute', '70-80 beats per minute', '120-130 beats per minute', '150-160 beats per minute'],
                correct: 1
            },
            {
                type: 'true-false',
                question: 'Cardiac muscle works automatically without you thinking about it.',
                correct: true
            },
            {
                type: 'multiple-choice',
                question: 'What connects muscles to bones?',
                options: ['Ligaments', 'Tendons', 'Cartilage', 'Joints'],
                correct: 1
            },
            {
                type: 'true-false',
                question: 'Ligaments connect muscles to bones.',
                correct: false
            },
            {
                type: 'true-false',
                question: 'The skull protects the brain.',
                correct: true
            },
            {
                type: 'multiple-choice',
                question: 'Which muscle type can you control to walk or pick things up?',
                options: ['Smooth muscle', 'Cardiac muscle', 'Skeletal muscle', 'Heart muscle'],
                correct: 2
            },
            {
                type: 'true-false',
                question: 'Veins have thicker walls than arteries.',
                correct: false
            },
            {
                type: 'drag-drop',
                question: 'Match each part to its correct job in the circulatory system:',
                pairs: [
                    { item: 'Heart', zone: 'Pumps blood to the body' },
                    { item: 'Arteries', zone: 'Carry blood away from heart' },
                    { item: 'Veins', zone: 'Bring blood back to heart' },
                    { item: 'Capillaries', zone: 'Connect arteries to veins' }
                ]
            },
            {
                type: 'true-false',
                question: 'A stroke happens when a blood vessel to the brain bursts or gets blocked.',
                correct: true
            },
            {
                type: 'multiple-choice',
                question: 'Where are the smallest bones in your body?',
                options: ['In your toes', 'In your fingers', 'In your inner ear', 'In your nose'],
                correct: 2
            },
            {
                type: 'drag-drop',
                question: 'Match each muscle type to where it is found:',
                pairs: [
                    { item: 'Smooth Muscle', zone: 'Found in liver, kidneys, lungs' },
                    { item: 'Cardiac Muscle', zone: 'Makes up heart tissue' },
                    { item: 'Skeletal Muscle', zone: 'You can control voluntarily' }
                ]
            },
            {
                type: 'true-false',
                question: 'The rib cage protects the heart and lungs.',
                correct: true
            },
            {
                type: 'multiple-choice',
                question: 'What happens to your heart rate when you exercise?',
                options: [
                    'It stays the same',
                    'It speeds up to give muscles more oxygen',
                    'It slows down',
                    'It stops'
                ],
                correct: 1
            },
            {
                type: 'drag-drop',
                question: 'Match each connector to its job:',
                pairs: [
                    { item: 'Tendons', zone: 'Connect muscles to bones' },
                    { item: 'Ligaments', zone: 'Connect bones to bones' },
                    { item: 'Cartilage', zone: 'Cushions joints' }
                ]
            },
            {
                type: 'multiple-choice',
                question: 'What disease makes bones weak and break easily?',
                options: ['Arthritis', 'Osteoporosis', 'Stroke', 'Hypertension'],
                correct: 1
            },
            {
                type: 'true-false',
                question: 'Cartilage is found near your joints.',
                correct: true
            },
            {
                type: 'multiple-choice',
                question: 'When do bones stop growing in length?',
                options: ['Age 10', 'Age 15', 'Late teens to early twenties', 'Age 30'],
                correct: 2
            },
            {
                type: 'true-false',
                question: 'Blood is bright red when it is full of oxygen.',
                correct: true
            },
            {
                type: 'multiple-choice',
                question: 'About how many muscles do you have?',
                options: ['Over 200', 'Over 400', 'Over 700', 'Over 1000'],
                correct: 2
            },
            {
                type: 'multiple-choice',
                question: 'What are pacemaker cells?',
                options: [
                    'Cells that help you walk faster',
                    'Special cells in cardiac muscle that make your heart beat',
                    'Cells in your brain',
                    'Cells that make bones grow'
                ],
                correct: 1
            },
            {
                type: 'multiple-choice',
                question: 'What is another name for high blood pressure?',
                options: ['Stroke', 'Hypertension', 'Arthritis', 'Osteoporosis'],
                correct: 1
            },
            {
                type: 'true-false',
                question: 'Arthritis causes swelling and pain in your joints.',
                correct: true
            },
            {
                type: 'multiple-choice',
                question: 'When do bones begin to develop?',
                options: [
                    'Around 6-7 weeks before birth',
                    'At birth',
                    'At age 5',
                    'At age 10'
                ],
                correct: 0
            },
            {
                type: 'true-false',
                question: 'Osteoporosis makes bones stronger.',
                correct: false
            },
            {
                type: 'multiple-choice',
                question: 'What is the correct path of blood circulation?',
                options: [
                    'Heart ‚Üí Veins ‚Üí Arteries ‚Üí Capillaries',
                    'Heart ‚Üí Arteries ‚Üí Capillaries ‚Üí Veins ‚Üí Back to Heart',
                    'Veins ‚Üí Heart ‚Üí Capillaries ‚Üí Arteries',
                    'Capillaries ‚Üí Veins ‚Üí Heart ‚Üí Arteries'
                ],
                correct: 1
            },
            {
                type: 'true-false',
                question: 'When you exercise, your heart rate stays exactly the same as when you rest.',
                correct: false
            },
            {
                type: 'multiple-choice',
                question: 'How do the skeletal and muscular systems work together?',
                options: [
                    'They don\'t work together',
                    'Muscles attach to bones and pull them to create movement',
                    'Bones attach to muscles to make them stronger',
                    'They only work together when you sleep'
                ],
                correct: 1
            },
            {
                type: 'multiple-choice',
                question: 'What can cause a stroke?',
                options: [
                    'Eating too much candy',
                    'A blood vessel to the brain bursting or getting blocked',
                    'Running too fast',
                    'Drinking too much water'
                ],
                correct: 1
            },
            {
                type: 'true-false',
                question: 'Cartilage helps cushion your joints so bones don\'t get damaged.',
                correct: true
            }
        ];

        let userAnswers = {};
        let currentDragItem = null;

        function showSection(section) {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.getElementById(section).classList.add('active');
            
            if (section === 'memoryGame') {
                initMemoryGame();
            } else if (section === 'clickGame') {
                resetClickGame();
            } else if (section === 'quiz') {
                initializeQuiz();
            }
        }

        function initializeQuiz() {
            const container = document.getElementById('quizQuestions');
            container.innerHTML = '';
            userAnswers = {};
            
            quizData.forEach((q, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question-card';
                questionDiv.innerHTML = `
                    <span class="question-number">Question ${index + 1}</span>
                    <div class="question-text">${q.question}</div>
                `;

                if (q.type === 'multiple-choice') {
                    const optionsDiv = document.createElement('div');
                    optionsDiv.className = 'options';
                    q.options.forEach((option, optIndex) => {
                        const optionDiv = document.createElement('div');
                        optionDiv.className = 'option';
                        optionDiv.textContent = option;
                        optionDiv.onclick = () => selectOption(index, optIndex, optionDiv);
                        optionsDiv.appendChild(optionDiv);
                    });
                    questionDiv.appendChild(optionsDiv);
                } else if (q.type === 'true-false') {
                    const tfDiv = document.createElement('div');
                    tfDiv.style.textAlign = 'center';
                    tfDiv.innerHTML = `
                        <button class="true-false-btn true-btn" onclick="selectTrueFalse(${index}, true, this)">‚úÖ True</button>
                        <button class="true-false-btn false-btn" onclick="selectTrueFalse(${index}, false, this)">‚ùå False</button>
                    `;
                    questionDiv.appendChild(tfDiv);
                } else if (q.type === 'drag-drop') {
                    const ddContainer = document.createElement('div');
                    ddContainer.className = 'drag-drop-container';
                    
                    const draggablesDiv = document.createElement('div');
                    draggablesDiv.className = 'draggables';
                    draggablesDiv.innerHTML = '<strong style="font-size: 1.2em;">üëà Drag these items:</strong>';
                    
                    const dropZonesDiv = document.createElement('div');
                    dropZonesDiv.className = 'drop-zones';
                    dropZonesDiv.innerHTML = '<strong style="font-size: 1.2em;">üëâ Drop them here:</strong>';

                    const shuffledPairs = [...q.pairs].sort(() => Math.random() - 0.5);
                    
                    shuffledPairs.forEach((pair, pairIndex) => {
                        const draggable = document.createElement('div');
                        draggable.className = 'draggable';
                        draggable.textContent = pair.item;
                        draggable.dataset.questionIndex = index;
                        draggable.dataset.pairIndex = pairIndex;
                        draggable.dataset.correctZone = pair.zone;
                        
                        draggable.addEventListener('touchstart', handleTouchStart, { passive: false });
                        draggable.addEventListener('touchmove', handleTouchMove, { passive: false });
                        draggable.addEventListener('touchend', handleTouchEnd, { passive: false });
                        
                        draggable.draggable = true;
                        draggable.addEventListener('dragstart', handleDragStart);
                        draggable.addEventListener('dragend', handleDragEnd);
                        
                        draggablesDiv.appendChild(draggable);
                    });

                    q.pairs.forEach((pair, pairIndex) => {
                        const dropZone = document.createElement('div');
                        dropZone.className = 'drop-zone';
                        dropZone.dataset.questionIndex = index;
                        dropZone.dataset.zoneName = pair.zone;
                        dropZone.innerHTML = `<div class="drop-zone-label">${pair.zone}</div>`;
                        
                        dropZone.addEventListener('touchmove', handleDropZoneTouchMove, { passive: false });
                        dropZone.addEventListener('dragover', handleDragOver);
                        dropZone.addEventListener('drop', handleDrop);
                        dropZone.addEventListener('dragleave', handleDragLeave);
                        
                        dropZonesDiv.appendChild(dropZone);
                    });

                    ddContainer.appendChild(draggablesDiv);
                    ddContainer.appendChild(dropZonesDiv);
                    questionDiv.appendChild(ddContainer);
                }

                container.appendChild(questionDiv);
            });

            updateProgress();
        }

        // Touch handling for mobile
        let touchStartX, touchStartY, touchElement;

        function handleTouchStart(e) {
            touchElement = e.target;
            touchElement.classList.add('dragging');
            const touch = e.touches[0];
            touchStartX = touch.clientX;
            touchStartY = touch.clientY;
            e.preventDefault();
        }

        function handleTouchMove(e) {
            if (!touchElement) return;
            e.preventDefault();
            const touch = e.touches[0];
            touchElement.style.position = 'fixed';
            touchElement.style.left = touch.clientX + 'px';
            touchElement.style.top = touch.clientY + 'px';
            touchElement.style.zIndex = '1000';
        }

        function handleTouchEnd(e) {
            if (!touchElement) return;
            e.preventDefault();
            
            const touch = e.changedTouches[0];
            const dropZone = document.elementFromPoint(touch.clientX, touch.clientY)?.closest('.drop-zone');
            
            if (dropZone) {
                const existing = dropZone.querySelector('.draggable');
                if (existing) {
                    existing.style.position = '';
                    existing.style.left = '';
                    existing.style.top = '';
                    existing.style.zIndex = '';
                    const draggablesDiv = document.querySelector('.draggables');
                    draggablesDiv.appendChild(existing);
                }
                
                dropZone.appendChild(touchElement);
                
                const questionIndex = parseInt(touchElement.dataset.questionIndex);
                const correctZone = touchElement.dataset.correctZone;
                const zoneName = dropZone.dataset.zoneName;
                
                if (!userAnswers[questionIndex]) {
                    userAnswers[questionIndex] = {};
                }
                userAnswers[questionIndex][touchElement.textContent] = zoneName;
            }
            
            touchElement.style.position = '';
            touchElement.style.left = '';
            touchElement.style.top = '';
            touchElement.style.zIndex = '';
            touchElement.classList.remove('dragging');
            touchElement = null;
            
            updateProgress();
        }

        function handleDropZoneTouchMove(e) {
            if (touchElement) {
                e.target.closest('.drop-zone')?.classList.add('drag-over');
            }
        }

        function handleDragStart(e) {
            currentDragItem = e.target;
            e.target.classList.add('dragging');
            e.dataTransfer.effectAllowed = 'move';
        }

        function handleDragEnd(e) {
            e.target.classList.remove('dragging');
        }

        function handleDragOver(e) {
            e.preventDefault();
            e.dataTransfer.dropEffect = 'move';
            e.currentTarget.classList.add('drag-over');
        }

        function handleDragLeave(e) {
            e.currentTarget.classList.remove('drag-over');
        }

        function handleDrop(e) {
            e.preventDefault();
            const dropZone = e.currentTarget;
            dropZone.classList.remove('drag-over');
            
            if (currentDragItem) {
                const existing = dropZone.querySelector('.draggable');
                if (existing) {
                    const draggablesDiv = document.querySelector('.draggables');
                    draggablesDiv.appendChild(existing);
                }
                
                dropZone.appendChild(currentDragItem);
                
                const questionIndex = parseInt(currentDragItem.dataset.questionIndex);
                const correctZone = currentDragItem.dataset.correctZone;
                const zoneName = dropZone.dataset.zoneName;
                
                if (!userAnswers[questionIndex]) {
                    userAnswers[questionIndex] = {};
                }
                userAnswers[questionIndex][currentDragItem.textContent] = zoneName;
                
                updateProgress();
            }
        }

        function selectOption(questionIndex, optionIndex, element) {
            element.parentElement.querySelectorAll('.option').forEach(opt => {
                opt.classList.remove('selected');
            });
            
            element.classList.add('selected');
            userAnswers[questionIndex] = optionIndex;
            showCelebration('‚≠ê');
            updateProgress();
        }

        function selectTrueFalse(questionIndex, answer, element) {
            element.parentElement.querySelectorAll('.true-false-btn').forEach(btn => {
                btn.classList.remove('selected');
            });
            
            element.classList.add('selected');
            userAnswers[questionIndex] = answer;
            showCelebration('‚≠ê');
            updateProgress();
        }

        function updateProgress() {
            const answered = Object.keys(userAnswers).length;
            const total = quizData.length;
            const percentage = Math.round((answered / total) * 100);
            
            const progressBar = document.getElementById('progressBar');
            progressBar.style.width = percentage + '%';
            progressBar.textContent = `${answered}/${total} answered`;
        }

        function submitQuiz() {
            let score = 0;
            let total = quizData.length;

            quizData.forEach((q, index) => {
                const questionCard = document.querySelectorAll('.question-card')[index];
                
                if (q.type === 'multiple-choice') {
                    const options = questionCard.querySelectorAll('.option');
                    options.forEach((opt, optIndex) => {
                        if (optIndex === q.correct) {
                            opt.classList.add('correct');
                        } else if (userAnswers[index] === optIndex) {
                            opt.classList.add('incorrect');
                        }
                    });
                    
                    if (userAnswers[index] === q.correct) {
                        score++;
                    }
                } else if (q.type === 'true-false') {
                    const buttons = questionCard.querySelectorAll('.true-false-btn');
                    buttons.forEach(btn => {
                        btn.disabled = true;
                        const isTrue = btn.textContent.includes('True');
                        if (isTrue === q.correct) {
                            btn.style.background = 'linear-gradient(135deg, #4caf50 0%, #81c784 100%)';
                            btn.style.color = 'white';
                        } else if (userAnswers[index] === isTrue) {
                            btn.style.background = 'linear-gradient(135deg, #f44336 0%, #e57373 100%)';
                            btn.style.color = 'white';
                        }
                    });
                    
                    if (userAnswers[index] === q.correct) {
                        score++;
                    }
                } else if (q.type === 'drag-drop') {
                    let allCorrect = true;
                    const dropZones = questionCard.querySelectorAll('.drop-zone');
                    
                    dropZones.forEach(zone => {
                        const item = zone.querySelector('.draggable');
                        if (item) {
                            const correctZone = item.dataset.correctZone;
                            const actualZone = zone.dataset.zoneName;
                            
                            if (correctZone === actualZone) {
                                zone.classList.add('correct');
                            } else {
                                zone.classList.add('incorrect');
                                allCorrect = false;
                            }
                            
                            item.draggable = false;
                            item.style.cursor = 'default';
                        }
                    });
                    
                    if (allCorrect) {
                        score++;
                    }
                }
            });

            const percentage = Math.round((score / total) * 100);
            let emoji = 'üåü';
            let message = 'Great job!';
            
            if (percentage >= 90) {
                emoji = 'üèÜ';
                message = 'OUTSTANDING! You\'re a science SUPERSTAR! üåü';
                for(let i = 0; i < 10; i++) {
                    setTimeout(() => showCelebration('üéâ'), i * 200);
                }
            } else if (percentage >= 80) {
                emoji = '‚≠ê';
                message = 'EXCELLENT work! You really know your stuff!';
                for(let i = 0; i < 5; i++) {
                    setTimeout(() => showCelebration('‚≠ê'), i * 200);
                }
            } else if (percentage >= 70) {
                emoji = 'üëç';
                message = 'Good job! Keep studying and you\'ll ace that test!';
            } else {
                emoji = 'üìö';
                message = 'Keep practicing! Go through the flip cards again!';
            }

            document.getElementById('scoreDisplay').innerHTML = `
                <div style="font-size: 4em; margin-bottom: 20px; animation: bounce 1s ease infinite;">${emoji}</div>
                <div style="font-size: 1.8em; margin-bottom: 15px;">${message}</div>
                <div style="font-size: 3em; margin-top: 20px; font-weight: bold;">Score: ${score}/${total}</div>
                <div style="font-size: 2.5em; margin-top: 10px;">${percentage}%</div>
            `;
            document.getElementById('scoreDisplay').style.display = 'block';
            document.getElementById('submitQuiz').style.display = 'none';
            document.getElementById('retakeQuiz').style.display = 'inline-block';

            document.getElementById('scoreDisplay').scrollIntoView({ behavior: 'smooth', block: 'center' });
        }

        function retakeQuiz() {
            document.getElementById('scoreDisplay').style.display = 'none';
            document.getElementById('submitQuiz').style.display = 'inline-block';
            document.getElementById('retakeQuiz').style.display = 'none';
            initializeQuiz();
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        window.addEventListener('load', () => {
            showSection('mainMenu');
        });
    </script>
</body>
</html>